<!DOCTYPE html>
<html lang="en-us">
  <head>
    <title>SICP-CH2-æ„é€ æ•°æ®æŠ½è±¡ - org-page</title>
    <meta charset="utf-8" />
    <meta name="author" content="Tsubasa" />
    <link rel="stylesheet" href="/media/css/main.css" type="text/css">
    <link rel="stylesheet" href="/media/css/prettify.css" type="text/css">
  </head>
  <body class="container">
    <div>
      <header class="masthead">
        <h1 class="masthead-title"><a href="/">org-page</a></h1>
        <p>static site generator</p>
        <ul>
          <li><a href="/blog/">Blog</a></li>
          <li><a href="/resource/">Resource</a></li>
          <li><a href="/tags/">Tags</a></li>
          <li><a href="/about/">About</a></li>
          <li><a href="https://github.com/kelvinh/org-page">GitHub</a></li>
          <li><a href="/rss.xml">RSS</a></li>
        </ul>
        <form method="get" id="searchform" action="//www.google.com/search">
          <input type="text" class="field" name="q" id="s" placeholder="Search">
          <input type="hidden" name="as_sitesearch" value="tsubasawp.github.io">
        </form>
      </header>
    </div>

<div>
<div class="post">
<h1>SICP-CH2-æ„é€ æ•°æ®æŠ½è±¡</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgheadline21">1. æ•°æ®æŠ½è±¡ç´¢å¼•</a>
<ul>
<li><a href="#orgheadline1">1.1. å®ä¾‹:æœ‰ç†æ•°çš„ç®—æœ¯è¿ç®—</a></li>
<li><a href="#orgheadline2">1.2. ä¹ é¢˜2.1</a></li>
<li><a href="#orgheadline3">1.3. æŠ½è±¡å±éšœ</a></li>
<li><a href="#orgheadline4">1.4. ä¹ é¢˜2.2</a></li>
<li><a href="#orgheadline5">1.5. ä¹ é¢˜2.3</a></li>
<li><a href="#orgheadline6">1.6. æ•°æ®æ„å‘³ç€ä»€ä¹ˆ</a></li>
<li><a href="#orgheadline7">1.7. ä¹ é¢˜2.4</a></li>
<li><a href="#orgheadline8">1.8. ä¹ é¢˜2.5</a></li>
<li><a href="#orgheadline9">1.9. ä¹ é¢˜2.6</a></li>
<li><a href="#orgheadline10">1.10. æ‰©å±•ç»ƒä¹ :åŒºé—´ç®—æœ¯</a></li>
<li><a href="#orgheadline11">1.11. ä¹ é¢˜2.7</a></li>
<li><a href="#orgheadline12">1.12. ä¹ é¢˜2.8</a></li>
<li><a href="#orgheadline13">1.13. ä¹ é¢˜2.9</a></li>
<li><a href="#orgheadline14">1.14. ä¹ é¢˜2.10</a></li>
<li><a href="#orgheadline15">1.15. ä¹ é¢˜2.11</a></li>
<li><a href="#orgheadline16">1.16. ä¹ é¢˜2.12</a></li>
<li><a href="#orgheadline17">1.17. ä¹ é¢˜2.13</a></li>
<li><a href="#orgheadline18">1.18. ä¹ é¢˜2.14</a></li>
<li><a href="#orgheadline19">1.19. ä¹ é¢˜2.15</a></li>
<li><a href="#orgheadline20">1.20. ä¹ é¢˜2.16</a></li>
</ul>
</li>
<li><a href="#orgheadline29">2. å±‚æ¬¡æ€§æ•°æ®å’Œé—­åŒ…æ€§è´¨</a>
<ul>
<li><a href="#orgheadline28">2.1. åºåˆ—çš„è¡¨ç¤º</a>
<ul>
<li><a href="#orgheadline22">2.1.1. å¯¹è¡¨çš„æ“ä½œ</a></li>
<li><a href="#orgheadline23">2.1.2. ä¹ é¢˜2.17</a></li>
<li><a href="#orgheadline24">2.1.3. ä¹ é¢˜2.18</a></li>
<li><a href="#orgheadline25">2.1.4. ä¹ é¢˜2.19</a></li>
<li><a href="#orgheadline26">2.1.5. ä¹ é¢˜2.20</a></li>
<li><a href="#orgheadline27">2.1.6. å¯¹è¡¨çš„æ˜ å°„</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline21" class="outline-2">
<h2 id="orgheadline21"><span class="section-number-2">1</span> æ•°æ®æŠ½è±¡ç´¢å¼•</h2>
<div class="outline-text-2" id="text-1">
<p>
<code>æ•°æ®æŠ½è±¡</code> æ˜¯ä¸€ç§ç§‘å­¦æ–¹æ³•,å®ƒä½¿æˆ‘ä»¬èƒ½å°†ä¸€ä¸ªå¤åˆæ•°æ®å¯¹è±¡çš„ä½¿ç”¨,ä¸è¯¥æ•°æ®å¯¹è±¡æ€æ ·ç”±æ›´åŸºæœ¬çš„æ•°æ®å¯¹è±¡æ„é€ èµ·æ¥çš„ç»†èŠ‚éš”ç¦»å¼€.
</p>
</div>

<div id="outline-container-orgheadline1" class="outline-3">
<h3 id="orgheadline1"><span class="section-number-3">1.1</span> å®ä¾‹:æœ‰ç†æ•°çš„ç®—æœ¯è¿ç®—</h3>
<div class="outline-text-3" id="text-1-1">
<p>
<code>è¡¨æ•°æ®ç»“æ„</code> ä»åºå¯¹æ„é€ èµ·æ¥çš„æ•°æ®å¯¹è±¡
</p>

<p>
å…³é”®å­—:cond, car, cdr
</p>

<p>
å®šä¹‰æœ‰ç†æ•°è¿‡ç¨‹:
</p>
<pre class="example">
;; å®šä¹‰æœ‰ç†æ•°å¹¶ç”¨gcdä¼˜åŒ–
(define (make-rat n d)
  (let ((g (gcd n d)))
    (cons (/ n g)  (/ d g))))
;; åˆ†å­
(define (number x) (car x))
;; åˆ†æ¯
(define (denom x) (cdr x))
;; print
(define (print-rat x)
  (newline)
  (display (number x))
  (display "/")
  (display (denom x)))
;; test val-&gt;1/2
(print-rat (make-rat 2 -4))
</pre>
</div>
</div>

<div id="outline-container-orgheadline2" class="outline-3">
<h3 id="orgheadline2"><span class="section-number-3">1.2</span> ä¹ é¢˜2.1</h3>
<div class="outline-text-3" id="text-1-2">
<pre class="example">
(define (make-rat n d)
  (let ((g (gcd (abs n) (abs d))))
    (cond ((&gt; (* n d) 0)
           (cons (/ (abs n) g)  (/ (abs d) g)))
          (else  (cons (- 0 (/ (abs n) g)) (/ (abs d) g))))))
</pre>
</div>
</div>

<div id="outline-container-orgheadline3" class="outline-3">
<h3 id="orgheadline3"><span class="section-number-3">1.3</span> æŠ½è±¡å±éšœ</h3>
<div class="outline-text-3" id="text-1-3">
<p>
æ•°æ®æŠ½è±¡çš„åŸºæœ¬æ€æƒ³æ˜¯:ä¸ºæ¯ä¸€ç±»æ•°æ®å¯¹è±¡æ ‡è¯†å‡ºä¸€ç»„æ“ä½œ,ä½¿å¾—å¯¹è¿™ç±»æ•°æ®å¯¹è±¡çš„æ“ä½œéƒ½å¯ä»¥åŸºäºå®ƒä»¬è¡¨è¿°,å¹¶ä¸”åªä½¿ç”¨å®ƒä»¬.
</p>
</div>
</div>
<div id="outline-container-orgheadline4" class="outline-3">
<h3 id="orgheadline4"><span class="section-number-3">1.4</span> ä¹ é¢˜2.2</h3>
<div class="outline-text-3" id="text-1-4">
<pre class="example">
(define (make-point x y) (cons x y))
(define (x-point x) (car x))
(define (y-point x) (cdr x))
(define (make-segment x y) (cons x y))
(define (start-point x) (car x))
(define (end-point x) (cdr x))
(define (print-point p)
  (newline)
  (display "(")
  (display (x-point p))
  (display ",")
  (display (y-point p))
  (display ")"))

(define (mid-point segment)
  (print-point (make-point
   (/ (+ (x-point (start-point segment)) (x-point (end-point segment))) 2)
   (/ (+ (y-point (start-point segment)) (y-point (end-point segment))) 2))))

(mid-point (make-segment (make-point 1.0 1.0) (make-point 4 5)))
;; value-&gt; (2.5,3.)
</pre>
</div>
</div>

<div id="outline-container-orgheadline5" class="outline-3">
<h3 id="orgheadline5"><span class="section-number-3">1.5</span> ä¹ é¢˜2.3</h3>
<div class="outline-text-3" id="text-1-5">
<pre class="example">
(define (double x) (* x x))
(define (make-rect p1 p2 p3)
  (cons (make-segment p1 p2) (make-segment p2 p3)))
(define (h-side rect) (car rect))
(define (v-side rect) (cdr rect))
(define (lenth seg)
  (let ((p1 (x-point seg))
        (p2 (y-point seg)))
  (sqrt
   (+
    (double (- (x-point p1) (x-point p2)))
    (double (- (y-point p1) (y-point p2)))))))
(define (rect-length rect)
  (* (+
      (lenth (h-side rect))
      (lenth (v-side rect)))
     2))
(define (rect-area rect)
  (*  (lenth (h-side rect))
      (lenth (v-side rect))))

;; test
(lenth (make-segment (make-point 1 1) (make-point 2 2))) 
;Value: 1.4142135623730951

(rect-length
 (make-rect (make-point 1 1) (make-point 2 2) (make-point 0 2))) 
;Value: 6.82842712474619

(rect-area
 (make-rect (make-point 1 1) (make-point 2 2) (make-point 0 2))) 
;Value: 2.8284271247461903
</pre>
</div>
</div>

<div id="outline-container-orgheadline6" class="outline-3">
<h3 id="orgheadline6"><span class="section-number-3">1.6</span> æ•°æ®æ„å‘³ç€ä»€ä¹ˆ</h3>
<div class="outline-text-3" id="text-1-6">
<p>
<code>æ•°æ®</code> æ˜¯ä¸€ç»„é€‚å½“çš„ <b>æ„é€ å‡½æ•°</b> å’Œ <b>é€‰æ‹©å‡½æ•°</b> ,ä»¥åŠä¸ºäº†ä½¿è¿™äº›è¿‡ç¨‹æˆä¸ºä¸€å¥—åˆæ³•çš„è¡¨ç¤º, å®ƒä»¬å¿…é¡»æ»¡è¶³çš„ä¸€ç»„*ç‰¹å®šæ¡ä»¶*
</p>

<p>
æ¡ä»¶å¯èƒ½ä¸å¤ªå¥½ç†è§£, ä¸¾ä¾‹æ¥è¯´, <b>åºå¯¹</b> è¿™ç§æ•°æ®çš„carå’Œcdræ“ä½œéœ€è¦æ»¡è¶³çš„æ¡ä»¶å°±æ˜¯:
ä»»ä½•å¯¹è±¡xå’Œy, å¦‚æœzæ˜¯(cons x y),é‚£ä¹ˆ(car z)å°±æ˜¯x, (cdr z)å°±æ˜¯y.
</p>

<p>
<code>æ•°æ®çš„è¿‡ç¨‹æ€§è¡¨ç¤º</code> lisp/schemeç”šè‡³å¯ä»¥ç”¨è¿‡ç¨‹æ¥è¡¨ç¤ºåºå¯¹:
</p>
<pre class="example">
(define (cons x y)
 (define (dispatch m)
   (cond ((= m 0) x)
         ((= m 1) y)
         (else (error "argument not 0 or 1")))
  dispatch))

(define (car z) (z 0))
(define (cdr z) (z 1))
</pre>

<p>
(cons x y)è¿”å›ä¸€ä¸ªè¿‡ç¨‹. å½“ç„¶schemeå’Œä¸€èˆ¬çš„lispå¹¶ä¸ä¼šè¿™æ ·å®ç°åºå¯¹,ä¸»è¦æ˜¯å‡ºäºæ€§èƒ½è€ƒè™‘.
</p>

<p>
åœ¨ç¬¬ä¸‰ç« å¯ä»¥çœ‹åˆ°,æ•°æ®çš„è¿‡ç¨‹æ€§è¡¨ç¤ºåœ¨è®¾è®¡ä¸­æ‰®æ¼”ç€ä¸€ç§é‡è¦çš„è§’è‰²,è¿™ç§é£æ ¼å«åš <code>æ¶ˆæ¯ä¼ é€’</code>
</p>
</div>
</div>

<div id="outline-container-orgheadline7" class="outline-3">
<h3 id="orgheadline7"><span class="section-number-3">1.7</span> ä¹ é¢˜2.4</h3>
<div class="outline-text-3" id="text-1-7">
<p>
ä»£æ¢è¿‡ç¨‹:
</p>
<pre class="example">
(car (cons x y))
((cons x y) (lambda (p q) p))
;æŠŠ(lambda (p q))ä½œä¸ºmå¸¦å…¥(lambda (m) (m x y))
((lambda (p q) p) x y)
;åº”ç”¨x,y,å¾—åˆ°
value-&gt;x
</pre>
</div>
</div>

<div id="outline-container-orgheadline8" class="outline-3">
<h3 id="orgheadline8"><span class="section-number-3">1.8</span> ä¹ é¢˜2.5</h3>
<div class="outline-text-3" id="text-1-8">
<p>
2å’Œ3éƒ½æ˜¯è´¨æ•°,å¯ä»¥åˆ©ç”¨è´¨æ•°ç›¸ä¹˜çš„æ€§è´¨å‚¨å­˜aå’Œb.
</p>
<pre class="example">
(define (cons-expt x y)
  (* (expt 2 x) (expt 3 y)))

(define (car-expt x)
  (define (iter a n)
    (cond ((= 0 (remainder a 2)) (iter (/ a 2) (+ n 1)))
          (else n)))
  (iter x 0))

(define (cdr-expt x)
  (define (iter a n)
    (cond ((= 0 (remainder a 3)) (iter (/ a 3) (+ n 1)))
          (else n)))
  (iter x 0))

(car-expt (cons-expt 5 6)) ;value-&gt;5
(cdr-expt (cons-expt 5 6)) ;value-&gt;6
</pre>
</div>
</div>

<div id="outline-container-orgheadline9" class="outline-3">
<h3 id="orgheadline9"><span class="section-number-3">1.9</span> ä¹ é¢˜2.6</h3>
<div class="outline-text-3" id="text-1-9">
<p>
ä½¿ç”¨churchè®¡æ•°çš„è¡¨ç¤ºå½¢å¼å®šä¹‰oneå’Œtwo. (è®²çœŸæˆ‘å¯¹ç€è¿™é“é¢˜å‘å‘†å¥½ä¹…&#x2026;.
</p>

<pre class="example">
(define zero (lambda (f) (lambda (x) x)))
(define (add-1 n)
  (lambda (f) (lambda (x) (f (n f) x))))

; é¦–å…ˆå±•å¼€add-1
(add-1 zero)
(lambda (f) (lambda (x) (f ((zero f) x))))
(lambda (f) (lambda (x) (f ((lambda(x) x) x))))
(lambda (f) (lambda (x) (f x)))
(add-1 one)
(lambda (f) (lambda (x) (f ((one f) x))))
(lambda (f) (lambda (x) (f ((lambda (x) (f x)) x))))
(lambda (f) (lambda (x) (f (f x))))
; å®šä¹‰one
(define one (lambda (f) (lambda (x) (f x))))
; å®šä¹‰two
(define two (lambda (f) (lambda (x) (f (f x)))))
;æ ¹æ®è§‚å¯Ÿå¾—å‡ºè§„å¾‹è§„å¾‹:oneçš„å®šä¹‰ä¸­åº”ç”¨äº†ä¸€æ¬¡f, twoçš„å®šä¹‰ä¸­åº”ç”¨äº†2æ¬¡f, æ‰€ä»¥è¿™ç±»è¿‡ç¨‹å¯ä»¥ç†è§£ä¸ºç”¨'åº”ç”¨fçš„æ¬¡æ•°'æ¥è¡¨ç¤ºæ•°å­—.
</pre>
<p>
å®šä¹‰é€šç”¨çš„åŠ æ³•:
</p>
<pre class="example">
(define (add a b)
  (lambda(f) (lambda(x) ((a f) ((b f) x)))))
</pre>
<p>
è¿™ä¸ªå®šä¹‰çš„æ€è·¯æ˜¯æŠŠaå’Œbä¸­åº”ç”¨fçš„è¿‡ç¨‹å åŠ . ä¸‹é¢æµ‹è¯•ä¸€ä¸‹:
</p>
<pre class="example">
(add one two)
(lambda(f) (lambda(x) ((lambda(x) (f x)) ((lambda(x) (f (f x))) x))))
(lambda(f) (lambda(x) ((lambda(x) (f x)) (f (f x)))))
(lambda(f) (lambda(x) (f (f (f x)))))
</pre>
</div>
</div>

<div id="outline-container-orgheadline10" class="outline-3">
<h3 id="orgheadline10"><span class="section-number-3">1.10</span> æ‰©å±•ç»ƒä¹ :åŒºé—´ç®—æœ¯</h3>
</div>

<div id="outline-container-orgheadline11" class="outline-3">
<h3 id="orgheadline11"><span class="section-number-3">1.11</span> ä¹ é¢˜2.7</h3>
<div class="outline-text-3" id="text-1-11">
<pre class="example">
(define (make-interval a b) (cons a b))
(define (upper-bound x) (car x))
(define (lower-bound x) (cdr x))
</pre>
</div>
</div>

<div id="outline-container-orgheadline12" class="outline-3">
<h3 id="orgheadline12"><span class="section-number-3">1.12</span> ä¹ é¢˜2.8</h3>
<div class="outline-text-3" id="text-1-12">
<pre class="example">
(define (sub-interval a b)
  (make-interval (- (upper-bound a) (upper-bound b))
                 (- (lower-bound a) (lower-bound b))))
</pre>
</div>
</div>

<div id="outline-container-orgheadline13" class="outline-3">
<h3 id="orgheadline13"><span class="section-number-3">1.13</span> ä¹ é¢˜2.9</h3>
<div class="outline-text-3" id="text-1-13">
<p>
å¯¹åŠ /å‡è¿ç®—è€Œè¨€:
\(w(a+b)=(u(a+b)-l(a+b))/2=(((u(a)+u(b))-(l(a)+l(b)))/2=(w(a)+w(b))\)
æ‰€ä»¥ä¸¤ä¸ªåŒºé—´çš„å’Œ/å·®çš„å®½åº¦å‡½æ•°å°±æ˜¯è¢«åŠ /å‡çš„åŒºé—´çš„å®½åº¦å‡½æ•°.
</p>

<p>
å¯¹ä¹˜æ³•è€Œè¨€:
</p>

<p>
æœ‰åŒºé—´A=[0,2],å®½åº¦ä¸º1;B=[0,4],å®½åº¦ä¸º2;
A*B=[0,8],å®½åº¦ä¸º4. æ‰€ä»¥\(w(A*B)\neq w(A)*w(B)\).
</p>

<p>
å¯¹é™¤æ³•è€Œè¨€:
A/B=[0,1/2],å®½åº¦ä¸º1/4. è€Œw(A)/w(B)=1/2; æ‰€ä»¥\(w(A/B)\neq w(A)/w(B)\).
</p>
</div>
</div>

<div id="outline-container-orgheadline14" class="outline-3">
<h3 id="orgheadline14"><span class="section-number-3">1.14</span> ä¹ é¢˜2.10</h3>
<div class="outline-text-3" id="text-1-14">
<pre class="example">
; é¦–å…ˆå®šä¹‰ä¸€ä¸ªæ£€æŸ¥è¿‡ç¨‹
(define (valid-interval x)
  (if (&lt; (* (upper-bound x) (lower-bound x)) 0) false true))
; é‡æ–°å®šä¹‰é™¤æ³•
(define (div-interval x y)
  (if (and (valid-interval x) (vali-interval y))
      (mul-interval x
                    (make-interval (/ 1.0 (upper-bound y))
                                   (/ 1.0 (lower-bound y))))
      (display "error:invalid param")))
</pre>
</div>
</div>

<div id="outline-container-orgheadline15" class="outline-3">
<h3 id="orgheadline15"><span class="section-number-3">1.15</span> ä¹ é¢˜2.11</h3>
<div class="outline-text-3" id="text-1-15">
<p>
æ ¹æ®åŒºé—´æ˜¯å¦è·¨è¿‡0|æ˜¯å¦å…¨ä¸ºæ­£|æ˜¯å¦å…¨ä¸ºè´Ÿåˆ†ä¸º9ç§æƒ…å†µ.
</p>
<ul class="org-ul">
<li>a &gt; 0, b &gt; 0</li>
<li>a &gt; 0, b &lt; 0</li>
<li>a &gt; 0, b cross 0</li>
<li>a cross 0, b &gt; 0</li>
<li>a cross 0, b &lt; 0</li>
<li>a cross 0, b cross 0</li>
<li>a &lt; 0, b &gt; 0</li>
<li>a &lt; 0, b &lt; 0</li>
<li>a &lt; 0, b cross 0</li>
</ul>

<p>
å®šä¹‰å¿«é€Ÿä¹˜æ³•(æœ‰ä¸ªé—®é¢˜..å½“aå’Œbéƒ½è·¨è¶Š0æ—¶,éœ€è¦4æ¬¡ä¹˜æ³•è¿ç®—)
</p>
<pre class="example">
(define (is-cross-zero x)
  (if (&lt; (* (upper-bound x) (lower-bound x)) 0) true false))
(define (is-positive x)
  (if (&gt;= (lower-bound x) 0) true false))
(define (is-negative x)
  (if (&lt; (upper-bound x) 0) true false))

(define (fast-mul-interval x y)
  (cond
   ((and (is-positive x) (is-positive y))
    (make-interval
     (* (lower-bound x) (lower-bound y))
     (* (upper-bound x) (upper-bound y))))
   ((and (is-positive x) (is-negative y))
    (make-interval
     (* (upper-bound x) (upper-bound y))
     (* (lower-bound x) (lower-bound y))))
   ((and (is-positive x) (is-cross-zero y))
    (make-interval
     (* (upper-bound x) (lower-bound y))
     (* (upper-bound x) (upper-bound y))))
   ((and (is-negative x) (is-positive y))
    (make-interval
     (* (lower-bound x) (upper-bound y))
     (* (upper-bound x) (lower-bound y))))
   ((and (is-negative x) (is-negative y))
    (make-interval
     (* (upper-bound x) (upper-bound y))
     (* (lower-bound x) (lower-bound y))))
   ((and (is-negative x) (is-cross-zero y))
    (make-interval
     (* (lower-bound x) (upper-bound y))
     (* (lower-bound x) (lower-bound y))))
   ((and (is-cross-zero x) (is-positive y))
    (make-interval
     (* (lower-bound x) (upper-bound y))
     (* (upper-bound x) (upper-bound y))))
   ((and (is-cross-zero x) (is-negative y))
   (make-interval
    (* (upper-bound x) (lower-bound y))
    (* (lower-bound x) (lower-bound y))))
  ((and (is-cross-zero x) (is-cross-zero y))
   (make-interval
    (min (* (lower-bound x) (upper-bound y)) (* (upper-bound x) (lower-bound y)))
    (max (* (upper-bound x) (upper-bound y)) (* (lower-bound x) (lower-bound y)) )))))
</pre>

<p>
ä¸Alyssaçš„æš´åŠ›ä¹˜æ³•è¿›è¡Œæ¯”è¾ƒæµ‹è¯•(åè¡€&#x2026;
</p>
<pre class="example">
(fast-mul-interval (make-interval 1 2) (make-interval 1 2))
(mul-interval (make-interval 1 2) (make-interval 1 2))
;; Value : (1 . 4)

(fast-mul-interval (make-interval 1 2) (make-interval -1 -2))
(mul-interval (make-interval 1 2) (make-interval -1 -2))
;; Value : (-4 .-1)

(fast-mul-interval (make-interval 1 2) (make-interval -1 2))
(mul-interval (make-interval 1 2) (make-interval -1 2))
;; Value : (-2, 4)

(fast-mul-interval (make-interval -2 -1) (make-interval 1 2))
(mul-interval (make-interval -2 -1) (make-interval 1 2))
;; Value : (-4, -1)

(fast-mul-interval (make-interval -2 -1) (make-interval -2 -1))
(mul-interval (make-interval -2 -1) (make-interval -2 -1))
;; Value : (1, 4)

(fast-mul-interval (make-interval -2 -1) (make-interval -1 2))
(mul-interval (make-interval -2 -1) (make-interval -1 2))
;; Value : (-4, 2)

(fast-mul-interval (make-interval -2 1) (make-interval 1 2))
(mul-interval (make-interval -2 1) (make-interval 1 2))
;; Value : (-4, 2)

(fast-mul-interval (make-interval -2 1) (make-interval -2 -1))
(mul-interval (make-interval -2 1) (make-interval -2 -1))
;; Value : (-2, 4)

(fast-mul-interval (make-interval -2 1) (make-interval -5 2))
(mul-interval (make-interval -2 1) (make-interval -5 2))
;; Value : (-5, 10)
</pre>
</div>
</div>

<div id="outline-container-orgheadline16" class="outline-3">
<h3 id="orgheadline16"><span class="section-number-3">1.16</span> ä¹ é¢˜2.12</h3>
<div class="outline-text-3" id="text-1-16">
<pre class="example">
(define (make-center-percent center percent)
  (make-interval (- center (* center percent))
                 (+ center (* center percent))))
(define (percent range)
  (let ((width (/ (- (upper-bound range) (lower-bound range)) 2))
        (mid (/ (+ (upper-bound range) (lower-bound range)) 2)))
        (/ width mid)))
</pre>
</div>
</div>

<div id="outline-container-orgheadline17" class="outline-3">
<h3 id="orgheadline17"><span class="section-number-3">1.17</span> ä¹ é¢˜2.13</h3>
<div class="outline-text-3" id="text-1-17">
<p>
è®¡ç®—ç²¾åº¦çš„å…¬å¼æ˜¯ç®€å•ç›¸åŠ :
</p>
<pre class="example">
(define (percent-mul r1 r2)
  (+ (percent r1) (percent r2)))
</pre>
<p>
æµ‹è¯•ä¸€ä¸‹
</p>
<pre class="example">
(percent (mul-interval (make-interval 9.99 10.01) (make-interval 9.99 10.01)))
(percent-mul (make-interval 9.99 10.01) (make-interval 9.99 10.01))
</pre>


<p>
ç„¶ååˆ†æpart1,part2çš„é—®é¢˜:
</p>
<pre class="example">
(define (part1 r1 r2)
  (div-interval (mul-interval r1 r2)
                (add-interval r1 r2)))
(define (part2 r1 r2)
  (let ((one (make-interval 1 1)))
    (div-interval one
                  (add-interval (div-interval one r1)
                                (div-interval one r2)))))

(part1 (make-interval 1 2) (make-interval 1 2)) ;val-&gt; (.25,2)
(part2 (make-interval 1 2) (make-interval 1 2)) ;val-&gt; (.5 1)
</pre>
<p>
çŒœæµ‹æ˜¯è¿ç®—é¡ºåºä¸åŒå¯¼è‡´ç²¾åº¦å˜åŒ–ä¸åŒ
</p>
</div>
</div>

<div id="outline-container-orgheadline18" class="outline-3">
<h3 id="orgheadline18"><span class="section-number-3">1.18</span> ä¹ é¢˜2.14</h3>
<div class="outline-text-3" id="text-1-18">
<p>
é¦–å…ˆéªŒè¯ä¸Šé¢çš„çŒœæµ‹
</p>
<pre class="example">
(let ((r1 (make-interval 1.0 2))
       (r2 (make-interval 1.0 2))
      (one (make-interval 1.0 1.0)))
  (percent r1)  ; .33
  (percent (mul-interval r1 r2)) ; .6 æ”¾å¤§2å€
  (percent (div-interval r1 r2)) ; .6 æ”¾å¤§2å€
  (percent (add-interval r1 r2)) ; .33 ä¸å˜
  (percent (div-interval one r1)) ; .33 ä¸å˜
  (percent (part1 r1 r2)) ; .77 æ”¾å¤§2.28å€
  (percent (part2 r1 r2)) ; .33 
  )
</pre>

<p>
å¯è§,ç›´æ¥å¯¹ä¸¤ä¸ªåŒºé—´è¿›è¡Œä¹˜æ³•æˆ–é™¤æ³•æ“ä½œä¼šå°†ç²¾åº¦æ”¾å¤§.è€ŒåŠ æ³•ä»¥åŠè¢«oneé™¤ä¸ä¼šæ”¾å¤§ç²¾åº¦.
</p>

<p>
åœ¨part1çš„è¿ç®—è¿‡ç¨‹ä¸­,ä¹˜æ³•å°†ç²¾åº¦æ”¾å¤§2å€, ç”¨æ”¾å¤§çš„ä¹˜ç§¯é™¤ä»¥å’Œä¹‹åä»0.6æ”¾å¤§åˆ°0.77. 
è€Œåœ¨part2ä¸­,ç”±äºå…¨æ˜¯é™¤ä»¥1çš„æ“ä½œ.ç²¾åº¦æ²¡æœ‰å‘ç”Ÿå˜åŒ–.
</p>
</div>
</div>

<div id="outline-container-orgheadline19" class="outline-3">
<h3 id="orgheadline19"><span class="section-number-3">1.19</span> ä¹ é¢˜2.15</h3>
<div class="outline-text-3" id="text-1-19">
<p>
evaè¯´çš„å¯¹. part2ä¸­çš„è¿ç®—éƒ½æ²¡æœ‰é€ æˆç²¾åº¦åŒºé—´æ‰©å¤§,æ‰€ä»¥æ˜¯æ›´å¥½çš„ç¨‹åº.
</p>
</div>
</div>

<div id="outline-container-orgheadline20" class="outline-3">
<h3 id="orgheadline20"><span class="section-number-3">1.20</span> ä¹ é¢˜2.16</h3>
<div class="outline-text-3" id="text-1-20">
<p>
(ä½œè€…è¯´æ­¤é¢˜éå¸¸éš¾&#x2026;æ€•
</p>

<p>
æˆ‘å…ˆæƒ³åˆ°äº†é™¤æ³•è¿ç®—å¯èƒ½é•¿è¿™æ ·:
</p>
<pre class="example">
(define (better-div-interval r1 r2)
  (let ((one (make-interval 1 1)))
    (better-mul-interval r1  (div-interval one r2))))
</pre>
<p>
ä½†é¦–å…ˆè¦èƒ½å®šä¹‰å‡ºä¸€ä¸ªbetter-mul-interval
</p>

<p>
æˆ‘å®åœ¨ç¼–ä¸ä¸‹å»äº†! googleäº†ä¸€ä¸‹,è¿™é“é¢˜çœŸçš„å¾ˆéš¾,æ¶‰åŠåˆ°æ¯”è¾ƒè‰°æ·±çš„æ•°å­¦é—®é¢˜. è´´ä¸ªé“¾æ¥åœ¨è¿™é‡Œå§:
<a href="http://stackoverflow.com/questions/14130878/sicp-2-16-interval-arithmetic-scheme">http://stackoverflow.com/questions/14130878/sicp-2-16-interval-arithmetic-scheme</a>
</p>
</div>
</div>
</div>

<div id="outline-container-orgheadline29" class="outline-2">
<h2 id="orgheadline29"><span class="section-number-2">2</span> å±‚æ¬¡æ€§æ•°æ®å’Œé—­åŒ…æ€§è´¨</h2>
<div class="outline-text-2" id="text-2">
<p>
<code>æ“ä½œçš„é—­åŒ…æ€§è´¨</code> é€šè¿‡æŸç§æ“ä½œç»„åˆèµ·æ¥çš„æ•°æ®å¯¹è±¡å¾—åˆ°çš„ç»“æœæœ¬èº«è¿˜å¯ä»¥é€šè¿‡åŒæ ·çš„æ“ä½œå†è¿›è¡Œç»„åˆ.
</p>
</div>

<div id="outline-container-orgheadline28" class="outline-3">
<h3 id="orgheadline28"><span class="section-number-3">2.1</span> åºåˆ—çš„è¡¨ç¤º</h3>
<div class="outline-text-3" id="text-2-1">
<p>
åºåˆ—å¯ä»¥é€šè¿‡åµŒå¥—consæ“ä½œæ„é€ èµ·æ¥
</p>
<pre class="example">
(cons 1
    (cons 2
        (cons 3
            (cons 4 ))))
</pre>

<p>
schemeä¸ºäº†æ–¹ä¾¿è¡¨çš„æ„é€ è€Œæä¾›äº†ä¸€ä¸ªåŸºæœ¬æ“ä½œlist.æ‰€ä»¥ä¸Šé¢åºåˆ—ä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼äº§ç”Ÿ:
</p>
<pre class="example">
(list 1 2 3 4)
</pre>
<p>
å®ƒä»¬æ˜¯ç­‰ä»·çš„.
</p>
</div>

<div id="outline-container-orgheadline22" class="outline-4">
<h4 id="orgheadline22"><span class="section-number-4">2.1.1</span> å¯¹è¡¨çš„æ“ä½œ</h4>
<div class="outline-text-4" id="text-2-1-1">
<p>
<code>car</code> å¯ä»¥è¢«çœ‹åšè·å–è¡¨ç¬¬ä¸€é¡¹å…ƒç´ çš„æ“ä½œ
<code>cdr</code> å¯ä»¥çœ‹åšè·å–è¡¨å‰©ä¸‹çš„å…ƒç´ çš„æ“ä½œ
<code>nil</code> ç”¨äºè¡¨ç¤ºåºå¯¹é“¾çš„ç»“æŸ
</p>

<p>
å¯ä»¥è¿™æ ·å®ç°ç´¢å¼•:
</p>
<pre class="example">
(define (list-ref item n)
  (if (= n 0)
      (car item)
      (list-ref (cdr item) (- n 1))))
</pre>

<p>
<code>null?</code> ç”¨äºæ£€æŸ¥æ˜¯å¦æ˜¯ç©ºè¡¨.
åˆ©ç”¨nullå®ç°length:
</p>
<pre class="example">
(define (length items)
  (if (null? items)
      0
      (+ 1 (length (cdr items)))))
</pre>
</div>
</div>

<div id="outline-container-orgheadline23" class="outline-4">
<h4 id="orgheadline23"><span class="section-number-4">2.1.2</span> ä¹ é¢˜2.17</h4>
<div class="outline-text-4" id="text-2-1-2">
<p>
è·å–åºåˆ—çš„æœ€åä¸€ä¸ªå…ƒç´ 
</p>
<pre class="example">
(define (last-pair items)
  (if (= 1 (length items))
      (list (car items))
      (last-pair (cdr items))))
</pre>
</div>
</div>

<div id="outline-container-orgheadline24" class="outline-4">
<h4 id="orgheadline24"><span class="section-number-4">2.1.3</span> ä¹ é¢˜2.18</h4>
<div class="outline-text-4" id="text-2-1-3">
<p>
è¿”å›é€†åºåºåˆ—
</p>
<pre class="example">
(define (reverse items)
  (if (= 1 (length items))
      items
      (append (reverse (cdr items)) (list (car items)))))
</pre>
</div>
</div>

<div id="outline-container-orgheadline25" class="outline-4">
<h4 id="orgheadline25"><span class="section-number-4">2.1.4</span> ä¹ é¢˜2.19</h4>
<div class="outline-text-4" id="text-2-1-4">
<p>
åˆ©ç”¨åºåˆ—ä¼˜åŒ–1.22çš„æ‰¾ç¡¬å¸ç¨‹åº,æŠŠå¸ç§å­˜å‚¨åœ¨åºåˆ—ä¸­
</p>
<pre class="example">
(define us-coins (list 50 25 10 5 1))
(define uk-coins (list 100 50 20 10 5 2 1 0.5))
(define (except-first-denomination coin-values) (cdr coin-values))
(define (first-denomination coin-values) (car coin-values))
(define (no-more? coin-values) (if (null? coin-values) true false))
(define (cc amount coin-values)
  (cond ((= amount 0 ) 1)
        ((or (&lt; amount 0) (no-more? coin-values)) 0)
        (else
         (+ (cc amount
                (except-first-denomination coin-values))
            (cc (- amount
                   (first-denomination coin-values))
                coin-values)))))
</pre>
<p>
å¸ç§çš„æ’åºä¸ä¼šå½±å“ç»“æœ.å› ä¸ºé’ˆå¯¹æ¯ç§ç¡¬å¸,éƒ½ä¼šä»æ€»é‡‘é¢amountå¼€å§‹é‡æ–°è®¡ç®—, æµ‹è¯•ç»“æœæ˜¯äº’ç›¸ç‹¬ç«‹çš„.
</p>
</div>
</div>

<div id="outline-container-orgheadline26" class="outline-4">
<h4 id="orgheadline26"><span class="section-number-4">2.1.5</span> ä¹ é¢˜2.20</h4>
<div class="outline-text-4" id="text-2-1-5">
<p>
è¿™é“é¢˜è¯´æ˜äº†schemeæ€æ ·å®šä¹‰å¸¦æœ‰ä»»æ„å¤šå‚æ•°çš„è¿‡ç¨‹
</p>

<p>
å…·ä½“æ–¹å¼æ˜¯ä½¿ç”¨ç‚¹å°¾:
</p>
<pre class="example">
(define (f x y . z) &lt;body&gt;)
</pre>
<p>
é‚£ä¹ˆå¦‚æœæ±‚å€¼(f 1 2 3 4 5),åˆ™x=1,y=2,ç„¶åz=(3,4,5),æ˜¯ä¸€ä¸ªlist. (åŸæ¥æ˜¯è¿™æ ·&#x2026;
</p>

<p>
è¯·ç”¨è¿™ç§è®°æ³•å†™å‡ºsame-parity:è¿”å›ä¸å…¶ç¬¬ä¸€ä¸ªå‚æ•°æœ‰åŒæ ·å¥‡å¶æ€§è´¨çš„è¡¨
</p>
<pre class="example">
;é¦–å…ˆå®šä¹‰ä¸€ä¸ªé€‰æ‹©å™¨,å®ƒæ¥å—ä¸€ä¸ªè¿‡ç¨‹å‚æ•°f,ç„¶åç”¨fæ¥è¿‡æ»¤å‡ºå­åºåˆ—
(define (filter items f)
  (cond
   ((null? items) (list))
   ((f (car items))
    (append (list (car items)) (filter (cdr items) f)))
   (else
    (append (list) (filter (cdr items) f)))))
</pre>
<p>
ç„¶åå®šä¹‰same-party.ä¸ºäº†ç®€åŒ–æˆ‘é¦–å…ˆåˆ©ç”¨appendæŠŠx,y,zæ•´åˆæˆä¸€ä¸ªåºåˆ—í ½í¸ƒ:
</p>
<pre class="example">
(define (same-party x y . z)
  (let ((param-list
         (append (list x) (append (list y) z))))
    (if
     (odd? x)
     (filter param-list odd?)
     (filter param-list even?))))
</pre>
<p>
æµ‹è¯•
</p>
<pre class="example">
(same-party 2 1 2 3 4 5 6 7 8) ; value: (1 3 5 7)
(same-party 1 2 3 4 5 6 7 8)   ; value: (2 2 4 6 8)
</pre>
</div>
</div>

<div id="outline-container-orgheadline27" class="outline-4">
<h4 id="orgheadline27"><span class="section-number-4">2.1.6</span> å¯¹è¡¨çš„æ˜ å°„</h4>
</div>
</div>
</div>

</div>
</div>
    <div>
      <div class="post-meta">
        <span title="post date" class="post-info">2016-04-05</span>
        <span title="last modification date" class="post-info">2016-04-21</span>
        <span title="tags" class="post-info">N/A</span>
        <span title="author" class="post-info">Tsubasa</span>
      </div>
      <section>
        <h1>Comments</h1>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
          //var disqus_developer = 1;
          var disqus_identifier = "/blog/2016/04/05/sicp-ch2-æ„é€ æ•°æ®æŠ½è±¡/";
          var disqus_url = "http://tsubasawp.github.io/blog/2016/04/05/sicp-ch2-æ„é€ æ•°æ®æŠ½è±¡/";
          var disqus_shortname = 'Tsubasa';
          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="//disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        <div class="ds-thread"></div>
        <script type="text/javascript">
          var duoshuoQuery = {short_name:'Tsubasa'};
          (function() {
          var ds = document.createElement('script');
          ds.type = 'text/javascript';ds.async = true;
          ds.src = 'http://static.duoshuo.com/embed.js';
          ds.charset = 'UTF-8';
          (document.getElementsByTagName('head')[0]
          || document.getElementsByTagName('body')[0]).appendChild(ds);
          })();
        </script>
      </section>
      <script src="//code.jquery.com/jquery-latest.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.js"></script>
      <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script src="/media/js/main.js"></script>
      <div class="footer">
        <p>Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.x (<a href="http://orgmode.org">Org mode</a> 8.x)</p>
        <p>
          Copyright &copy; 2012 - <span id="footerYear"></span> <a href="mailto:tsubasa &lt;dot&gt; wp &lt;at&gt; gmail &lt;dot&gt; com">Tsubasa</a>
          &nbsp;&nbsp;-&nbsp;&nbsp;
          Powered by <a href="https://github.com/kelvinh/org-page" target="_blank">org-page</a>
          <script type="text/javascript">document.getElementById("footerYear").innerHTML = (new Date()).getFullYear();</script>
        </p>
      </div>
    </div>

  </body>
</html>
