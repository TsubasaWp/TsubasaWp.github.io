#+TITLE:     SICP Reading Note - ch1
#+AUTHOR:    Tsubasa
#+EMAIL:     tsubasa.wp@gmail.com
#+DATE:      2016-03-09
#+STARTUP:   latexpreview

sicpçªç»ˆäºå›æ¥äº†...

[å‰è¨€]
é¦–å…ˆæ€»ç»“ä¸€ä¸‹å‰è¨€å§. è¿™æœ¬ä¹¦çš„ç›®æ ‡æ˜¯æ•™æˆä¸€ç§é€šç”¨çš„æ–¹æ³•å­¦æ€æƒ³, ä¸ä»…é™äºè®¡ç®—æœºç¨‹åºè®¾è®¡.
é‡‡ç”¨scheme(lispçš„ä¸€ç§æ–¹è¨€)æ•™æˆè¿™é—¨è¯¾,æ˜¯å› ä¸ºå®ƒé›†powerfulä¸beautifuläºä¸€èº«.

ps:ç¬¬ä¸€å¥è¯è¯´è¿™æœ¬ä¹¦æ˜¯MITè®¡ç®—æœºç§‘å­¦çš„å…¥é—¨æ•™æ...çœ‹åˆ°è¿™ä¸ªæˆ‘å°±è·ªä¸‹äº†. 

* æ„é€ è¿‡ç¨‹æŠ½è±¡
è®¡ç®—è¿‡ç¨‹: å­˜åœ¨äºè®¡ç®—æœºé‡Œçš„ä¸€ç±»æŠ½è±¡äº‹ç‰©,è¿™äº›è¿‡ç¨‹ä¼šå»æ“ä½œä¸€äº›ç§°ä¸º =æ•°æ®= çš„æŠ½è±¡äº‹ç‰©. äººä»¬åˆ›å»ºå‡ºä¸€äº›ç§°ä¸º =ç¨‹åº= çš„è§„åˆ™æ¨¡å¼, ä»¥æŒ‡å¯¼è¿™ç±»è¿‡ç¨‹çš„è¿›è¡Œ.

è®¡ç®—è¿‡ç¨‹çš„lispæè¿°æœ¬èº«å¯ä»¥ä½œä¸ºlispçš„æ•°æ®æ¥è¡¨ç¤ºå’Œæ“ä½œ. è¿™ç§çµæ´»æ€§ä½¿lispç§°ä¸ºæ¢ç´¢è¯­è¨€ç‰¹å¾çš„æœ€æ–¹ä¾¿çš„è¯­è¨€ä¹‹ä¸€.

** ç¨‹åºè®¾è®¡çš„åŸºæœ¬å…ƒç´ 
ä¸€ä¸ªpowerfulçš„è¯­è¨€, é™¤äº†èƒ½å¤Ÿæ‰§è¡Œä»»åŠ¡, æ›´åº”è¯¥èƒ½å¸®åŠ©ç¨‹åºçŒ¿ç»„ç»‡è‡ªå·±çš„æ€æƒ³.

- åŸºæœ¬è¡¨è¾¾å½¢å¼
- ç»„åˆçš„æ–¹æ³•
- æŠ½è±¡çš„æ–¹æ³•

åœ¨ç¨‹åºè®¾è®¡ä¸­,æˆ‘ä»¬éœ€è¦å¤„ç†ä¸¤ç±»è¦ç´ :è¿‡ç¨‹å’Œæ•°æ®. æœ¬ç« æŠŠé‡ç‚¹æ”¾åœ¨è¿‡ç¨‹ä¸Š.

*** è¡¨è¾¾å¼
æœ€ç®€å•çš„è¡¨è¾¾å¼: 42, è¡¨ç¤ºåŸºæœ¬è¿‡ç¨‹çš„è¡¨è¾¾å¼: ( + 42 42 ). '+'ç§°ä¸º =è¿ç®—ç¬¦=, æ•°å­—æ˜¯ =è¿ç®—å¯¹è±¡=, æ±‚å€¼è¿‡ç¨‹å°±æ˜¯å°†è¿ç®—ç¬¦æ‰€åˆ»ç”»çš„è¿ç®—è¿‡ç¨‹åº”ç”¨äºè¿ç®—å¯¹è±¡.

lispæŠŠè¿ç®—ç¬¦æ”¾åœ¨å·¦è¾¹, ç§°ä¸º =å‰ç¼€è¡¨ç¤º=. å‰ç¼€è¡¨ç¤ºçš„ä¼˜ç‚¹æ˜¯:
- å¯ä»¥å¸¦æœ‰ä»»æ„ä¸ªå®å‚è€Œæ²¡æœ‰æ­§ä¹‰
- å¯ä»¥ç›´æ¥æ‰©å……, å…è®¸å‡ºç°ç»„åˆå¼åµŒå¥—, å¦‚(+ ( * 3 5 ) ( - 10 6))

*** å‘½åå’Œç¯å¢ƒ
ç¨‹åºè®¾è®¡è¯­è¨€éœ€è¦æä¾›ä¸€ç§[é€šè¿‡åå­—å»ä½¿ç”¨è®¡ç®—å¯¹è±¡]çš„æ–¹å¼.

åœ¨schemeä¸­, å‘½åé€šè¿‡defineæ¥è¿›è¡Œ.
: (define size 2)
æˆ‘ä»¬å¯ä»¥æŠŠå€¼2ä¸ç¬¦å·sizeå…³è”, åˆèƒ½å¤Ÿæå–å‡ºè¿™ä¸ªå€¼, è¿™è¯´æ˜è§£é‡Šå™¨æœ‰å­˜å‚¨èƒ½åŠ›,ä»¥ç»´æŠ¤åå­—-å€¼å¯¹å¶çš„è½¨è¿¹, è¿™ç§å­˜å‚¨ç§°ä¸º =ç¯å¢ƒ=.

*** ç»„åˆå¼æ±‚å€¼
æ±‚å€¼ä¸€ä¸ªç»„åˆå¼çš„æ­¥éª¤æ˜¯:
- 1) æ±‚å€¼è¯¥ç»„åˆå¼çš„å„ä¸ªå­è¡¨è¾¾å¼
- 2) å°†ä½œä¸ºæœ€å·¦å­è¡¨è¾¾å¼çš„å€¼çš„è¿‡ç¨‹åº”ç”¨äºç›¸åº”çš„å®é™…å‚æ•°.

æ²¡é”™å°±æ˜¯é€’å½’. é€’å½’æ˜¯ä¸€ç§å¤„ç†å±‚æ¬¡ç»“æ„çš„å¼ºæœ‰åŠ›çš„æŠ€æœ¯. è¿™ç§è®¡ç®—è¿‡ç¨‹ç§°ä¸º =æ ‘å½¢ç§¯ç´¯=.

åœ¨æ±‚å€¼è¿‡ç¨‹ä¸­, =ç¯å¢ƒ= ç”¨äºç¡®å®šè¡¨è¾¾å¼ä¸­å„ä¸ªç¬¦å·çš„æ„ä¹‰, å®ƒä¸ºæ±‚å€¼è¿‡ç¨‹æä¾›äº†ä¸€ç§ä¸Šä¸‹æ–‡.

ä¾‹å¤–: å¯¹è¡¨è¾¾å¼ (define x 1) æ±‚å€¼ä¸æ˜¯æŠŠdefineè¿ç”¨äºä¸¤ä¸ªå‚æ•°, å› ä¸ºdefineçš„ä½œç”¨æ˜¯å…³è”xå’Œ1, ä¹Ÿå°±æ˜¯è¯´(define x 1)ä¸æ˜¯ä¸€ä¸ªç»„åˆå¼. è¿™ç§ä¾‹å¤–ç§°ä¸º =ç‰¹æ®Šå½¢å¼= .

*** å¤åˆè¿‡ç¨‹
ä¸Šè¿°çš„æŸäº›å…ƒç´ ä¹Ÿä¼šå‡ºç°åœ¨å…¶å®ƒè¯­è¨€ä¸­:
- æ•°å’Œç®—æœ¯è¿ç®—æ˜¯åŸºæœ¬çš„æ•°æ®å’Œè¿‡ç¨‹
- ç»„åˆå¼çš„åµŒå¥—æä¾›äº†ä¸€ç§ç»„ç»‡èµ·å¤šä¸ªæ“ä½œçš„æ–¹æ³•
- å®šä¹‰æ˜¯ä¸€ç§å—é™çš„æŠ½è±¡æ‰‹æ®µ, å®ƒä¸ºåå­—å…³è”å“åº”çš„å€¼.

ä¸‹é¢æ¥è®²å¨åŠ›æ›´å¼ºå¤§çš„ =è¿‡ç¨‹å®šä¹‰=
: (define (square x) (* x x ))
ä¸Šé¢å®šä¹‰äº†ä¸€ä¸ªå¤åˆè¿‡ç¨‹square, å®šä¹‰å¥½ä¹‹åå¯ä»¥è¿™æ ·ä½¿ç”¨
: (square 21)
æœ‰ç‚¹åƒå®šä¹‰å‡½æ•°. æ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥æŠŠsquareä½œä¸ºåŸºæœ¬æ„å»ºå»å®šä¹‰å…¶å®ƒè¿‡ç¨‹
: (define (sum-of-squares x y) ( + (square x) (square Y)))

å¤åˆè¿‡ç¨‹çš„ä½¿ç”¨æ–¹å¼ä¸åŸºæœ¬è¿‡ç¨‹å®Œå…¨ä¸€è‡´.

*** è¿‡ç¨‹åº”ç”¨çš„ä»£æ¢æ¨¡å‹
å¯¹å¸¦æœ‰å¤åˆè¿‡ç¨‹çš„ç»„åˆå¼æ±‚å€¼, è§£é‡Šå™¨ä¼šå…ˆ"å±•å¼€"å¤åˆè¿‡ç¨‹, æŠŠé—®é¢˜è§„çº¦ä¸ºå¯¹å¦ä¸€ä¸ªç»„åˆå¼æ±‚å€¼. 
: (square 21) -> (* 21 21)
è¿™ç§è®¡ç®—è¿‡ç¨‹ç§°ä¸ºè¿‡ç¨‹åº”ç”¨çš„ =ä»£æ¢æ¨¡å‹=

=åº”ç”¨åº=: å…ˆæ±‚å€¼å‚æ•°è€Œååº”ç”¨çš„æ±‚å€¼æ¨¡å‹

=æ­£åˆ™åº=: å®Œå…¨å±•å¼€è€Œåè§„çº¦çš„æ±‚å€¼æ¨¡å‹

lispé‡‡ç”¨åº”ç”¨åºæ±‚å€¼, éƒ¨åˆ†åŸå› åœ¨äºè¿™æ ·å¯ä»¥é¿å…å¯¹äºè¡¨è¾¾å¼çš„é‡å¤æ±‚å€¼, é‡ç‚¹æ˜¯åœ¨è¶…å‡ºå¯ä»¥é‡‡ç”¨æ›¿æ¢æ–¹å¼æ¨¡æ‹Ÿçš„è¿‡ç¨‹èŒƒå›´ä¹‹å, æ­£åˆ™åºçš„å¤„ç†å°†å˜å¾—å¤æ‚çš„å¤š.

*** æ¡ä»¶è¡¨è¾¾å¼å’Œè°“è¯ 
    æ¡ä»¶è¡¨è¾¾å¼
ä¾æ®ä¸åŒæƒ…å†µé‡‡å–ä¸åŒåŠ¨ä½œçš„ç»“æ„å«åš =åˆ†æƒ…å†µåˆ†æ=
=cond=
: (cond ((> x 0 )x) ((= x 0) 0) ((< x 0) (-x)))
: (cond ((< x 0) (-x) (else x)))
elseæ˜¯ä¸€ä¸ªç‰¹æ®Šç¬¦å·,å¯ä»¥ç”¨åœ¨condæœ€åä¸€ä¸ªä½ç½®,å¦‚æœcondæ‰€æœ‰åˆ†æ”¯éƒ½è¢«è·³è¿‡,å°±ä¼šè¿”å›elseçš„å€¼
=if=
: (if (< x 0) (-x) x)
ifæ˜¯condçš„ä¸€ç§å—é™å½¢å¼, é€‚ç”¨äºåªæœ‰ä¸¤ç§æƒ…å†µçš„åˆ†æ.
è°“è¯: =< > and or not= ...
æ³¨æ„andå’Œoréƒ½æ˜¯ç‰¹æ®Šå½¢å¼,å®ƒä»¬çš„å­è¡¨è¾¾å¼ä¸ä¸€å®šæ±‚å€¼. notåˆ™æ˜¯ä¸€ä¸ªæ™®é€šè¿‡ç¨‹.

*** [ä¹ é¢˜]
 - 1.1 .æ±‚å€¼(é€‰åšä¸€éƒ¨åˆ†)
 (define a 3) -> a
 (define b ( + a 1)) -> b
 (= a b) -> #f

 - 1.2 å°†ä¸‹é¢è¡¨è¾¾å¼å˜æ¢ä¸ºå‰ç¼€å½¢å¼:
 (5+4+(2-(3-(6+5/4))))/(3*(6-2)(2-7))

 : (/ (+ 5 4 (- 2 (- 3 ( + 6 (/ 5 4))))) (* 3 (- 6 2) ( - 2 7)))

 - 1.3 å®šä¹‰ä¸€ä¸ªè¿‡ç¨‹, å®ƒä»¥ä¸‰ä¸ªæ•°ä¸ºå‚æ•°, è¿”å›å…¶ä¸­è¾ƒå¤§çš„ä¸¤ä¸ªæ•°ä¹‹å’Œ
 : (define (min x y z) 
 :       (cond (((< x y) and (< x z))  x)
 : 	(((< y x) and (< y z))  y)
 : 	(else z)))
 : (define (sum2 x y z) (- (+ x y z) (min x y z )))

 - 1.4 ä»”ç»†è€ƒå¯Ÿä¸Šé¢ç»™å‡ºçš„å…è®¸è¿ç®—ç¬¦ä¸ºå¤åˆè¡¨è¾¾å¼çš„ç»„åˆå¼çš„æ±‚å€¼æ¨¡å‹, æ ¹æ®å¯¹è¿™ä¸€æ¨¡å‹çš„è®¤çŸ¥æè¿°ä¸‹é¢è¿‡ç¨‹çš„è¡Œä¸º:
 : (define (a-plus-abs-b a b) ((if (> b 0)  + -) a b))
 - å¯¹å­è¡¨è¾¾å¼(> b 0)æ±‚å€¼, å¾—ç»“æœr1
 - å¯¹å­è¡¨è¾¾å¼(if (r1) + -)æ±‚å€¼, å¾—åˆ°ç»“æœr2, r2æ˜¯è¿ç®—è¿‡ç¨‹.
 - å¯¹(r2 a b)æ±‚å€¼

 - 1.5 Benå‘æ˜äº†ä¸€ç§æ£€æµ‹æ–¹æ³•,èƒ½å¤Ÿç¡®å®šè§£é‡Šå™¨ä»¥æ­£åˆ™åºæ±‚å€¼, è¿˜æ˜¯ä»¥åº”ç”¨åºæ±‚å€¼. ä»–å®šä¹‰äº†ä¸‹é¢ä¸¤ä¸ªè¿‡ç¨‹:
 : (define (p) (p))
 : (define (test x y) (if ( = x 0) 0 y))
 : (test 0 (p))
 ç”¨åº”ç”¨åºå’Œæ­£åˆ™åºè§£é‡Šå™¨è¿è¡Œå®ƒä»¬, æœ€ç»ˆä¼šå‘ç”Ÿä»€ä¹ˆ?
 - åº”ç”¨åº: 0
 - æ­£åˆ™åº: æ— é™å¾ªç¯. å› ä¸ºæ— è®º(= x 0)çš„ç»“æœå¦‚ä½•, yéƒ½ä¼šè¢«æ±‚å€¼.

** å®ä¾‹:é‡‡ç”¨ç‰›é¡¿æ³•æ±‚å¹³æ–¹æ ¹
ä¸Šé¢ä»‹ç»çš„è¿‡ç¨‹éƒ½å¾ˆåƒå¸¸è§„æ•°å­¦å‡½æ•°, ç„¶è€Œæ•°å­¦å’Œè®¡ç®—æœºè¿‡ç¨‹æœ‰ä¸€äº›åŒºåˆ«:
- æ•°å­¦å…³å¿ƒè¯´æ˜æ€§çš„æè¿°(æ˜¯ä»€ä¹ˆ)
- è®¡ç®—æœºå…³å¿ƒè¡ŒåŠ¨æ€§çš„æè¿°(æ€ä¹ˆåš)

ä¸€ä¸ªæ±‚å¹³æ–¹æ ¹çš„æ•°å­¦æè¿°æ˜¯: squrt(x) = y, y>=0 && y^2=x. æˆ‘ä»¬æ— æ³•æŠŠå®ƒç›´è¯‘æˆè®¡ç®—æœºå‡½æ•°.
è®¡ç®—æœºæ±‚å¹³æ–¹æ ¹çš„å¸¸ç”¨æ–¹æ³•æ˜¯:
=ç‰›é¡¿é€æ­¥é€¼è¿‘æ³•= : å…ˆçŒœæµ‹ä¸€ä¸ªå€¼a, å¹¶è®¡ç®—b = x/a, æ¯”è¾ƒaå’Œbæ˜¯å¦è¶³å¤Ÿç›¸ä¼¼, å¦‚æœä¸æ»¡è¶³æ¡ä»¶åˆ™æ‰§è¡Œä¸€äº›æ“ä½œå¾—åˆ°æ›´å¥½çš„çŒœæµ‹a2, å¾ªç¯å¾€å¤ç›´åˆ°æ±‚å‡ºå¹³æ–¹æ ¹.

åŸºæœ¬ç­–ç•¥:
: (define (sqrt-iter guess x)
:   (if (good-enough guess x)
:       guess
:       (sqrt-iter (improve guess x) x)))

å¡«å……ç»†èŠ‚:
: (define (improve guess x)
:   (average guess (/ x guess)))
: 
: (define (average x y) (/ (+ x y) 2))
: 
: (define (good-enough guess x)
:         (< (abs (- (square guess) x)) 0.001))

å¯åŠ¨:
: (define (squrt x) (sqrt-iter 1.0 x))    

*** [ä¹ é¢˜]
- 1.6 å¯å¦é€šè¿‡condå®šä¹‰ä¸€ä¸ªå¸¸è§„è¿‡ç¨‹æ¥ä»£æ›¿ifå‘¢? Evaå°è¯•å†™äº†ä»¥ä¸‹ç¨‹åº, 
é—®: å¦‚æœç”¨è¿™ä¸ªnew-ifæ¥å®ç°æ±‚å¹³æ–¹æ ¹ç¨‹åºsqrt-iter,ä¼šæœ‰ä»€ä¹ˆé—®é¢˜
: (define (new-if predicate then-clause else-clause)
:         (cond (predicate then-clause)
:               (else else-clause)))
ç­”: é—®é¢˜åœ¨äºcondçš„æ‰€æœ‰åˆ†æ”¯éƒ½ä¼šè¢«æ±‚å€¼. 
sqrt-iteræ˜¯é€’å½’,ifæ»¡è¶³æ¡ä»¶æ—¶ä¸å¯¹else-clauseæ±‚å€¼, ä»è€Œå¯ä»¥åœæ­¢é€’å½’è°ƒç”¨.
è€Œnew-ifç”±äºæ‰€æœ‰åˆ†æ”¯éƒ½ä¼šæ— æ¡ä»¶æ±‚å€¼, æ‰€ä»¥å®ƒåº”ç”¨äºé€’å½’å‡½æ•°æ—¶æ ¹æœ¬åœä¸ä¸‹æ¥.

- 1.7 ä¸Šé¢good-enoughçš„å®ç°å¯¹äºå¾ˆå°æˆ–å¾ˆå¤§çš„æ•°æ¥è¯´ä¸å¤ªå¥½, è¯·ç»™å‡ºè¯æ˜.
å¦‚æœä½¿ç”¨ç›‘æµ‹çŒœæµ‹å€¼æ”¹å˜æ¯”ç‡çš„æ–¹å¼, å¯¹äºå¤§æ•°æˆ–å°æ•°æ¥è¯´å¯ä»¥å·¥ä½œå—?
- å¯¹äºå°äº0.001(good-enoughçš„ä¸´ç•Œå€¼)çš„å°æ•°,good-enoughæ— æ³•è¿›è¡Œæ­£ç¡®çš„åˆ¤æ–­.
å¯¹äºå¤§æ•°æ¥è¯´, ç”±äºç²¾åº¦ä¸è¶³ä»¥è¡¨ç¤ºguesså’Œxä¹‹é—´çš„å·®(good-enoughå‡ ä¹æ°¸è¿œä¸ºfalse), ç¨‹åºé™·å…¥æ­»å¾ªç¯.
- æ”¹å˜æ¯”ç‡çš„ç®—æ³•å¯¹å¤§æ•°å’Œå°æ•°éƒ½å¯ä»¥å·¥ä½œ.
: (define (good-enough old-guess new-guess)
:         (< (/ (abs (- old-guess new-guess)) old-guess) 0.01))

- 1.8 ç”¨ç‰›é¡¿æ³•æ±‚ç«‹æ–¹æ ¹
å¦‚æœyæ˜¯xç«‹æ–¹æ ¹çš„ä¸€ä¸ªè¿‘ä¼¼å€¼,é‚£ä¹ˆä¸‹é¢å…¬å¼å¯ä»¥ç»™å‡ºä¸€ä¸ªæ›´å¥½çš„è¿‘ä¼¼å€¼: (x/y^2 +2*y)/3
: (define (cube-iter guess x)
:   (if (good-enough-cube guess x)
:       guess
:       (cube-iter (improve-cube guess x) x)))
: 
: (define (good-enough-cube guess x)
:         (< (abs (- (* guess guess  guess) x)) 0.001))
: 
: (define (improve-cube y x)
:     (/ (+ (/ x (* y y)) (* 2 y)) 3))
: 
: (define (cube x) (cube-iter 1 x))

** è¿‡ç¨‹ä½œä¸ºé»‘ç®±æŠ½è±¡
=è¿‡ç¨‹æŠ½è±¡= ä¸€ä¸ªè¿‡ç¨‹çš„å®šä¹‰åº”å½“èƒ½éšè—èµ·ä¸€äº›ç»†èŠ‚,ä½¿å¾—è¿‡ç¨‹çš„ä½¿ç”¨è€…å¯ä»¥ç›´æ¥å¤ç”¨è€Œä¸å¿…å…³å¿ƒå®ç°ç»†èŠ‚.

*** å±€éƒ¨å
è¿‡ç¨‹çš„æ„ä¹‰åº”è¯¥ä¸ä¾èµ–äºå…¶ä½œè€…ä¸ºå½¢å¼å‚æ•°æ‰€é€‰å®šçš„åå­—.

ä¸€ä¸ªè¿‡ç¨‹çš„å®šä¹‰ =çº¦æŸ= äº†å®ƒæ‰€æœ‰å½¢å¼å‚æ•°,å½¢å‚çš„å…·ä½“åå­—å®Œå…¨æ²¡æœ‰å…³ç³», è¿™æ ·çš„åå­—ç§°ä¸º =çº¦æŸå˜é‡= .
ç›¸åå¦‚æœä¸€ä¸ªå˜é‡ä¸æ˜¯è¢«çº¦æŸçš„, å®ƒå°±æ˜¯ =è‡ªç”±çš„=. 

*** å†…éƒ¨å®šä¹‰å’Œå—ç»“æ„
å¹³æ–¹æ ¹ç¨‹åºæœ‰ä¸ªé—®é¢˜, å®ƒç”±è®¸å¤šåˆ†ç¦»çš„è¿‡ç¨‹ç»„æˆ, è€Œå®é™…ç”¨æˆ·åªå…³å¿ƒsqrtè¿™ä¸€ä¸ªè¿‡ç¨‹, å…¶å®ƒè¿‡ç¨‹ä¸å¿…æš´éœ²ç»™ç”¨æˆ·.
(è¦è¿è¡Œè¿™ä¸ªç¨‹åºä¹Ÿå¾ˆè›‹ç–¼å•Š...)

æ‰€ä»¥,æˆ‘ä»¬éœ€è¦æŠŠè¿™äº›éº»çƒ¦çš„å­è¿‡ç¨‹å±€éƒ¨åŒ–, æŠŠå®ƒä»¬éšè—åˆ°sqrté‡Œé¢.

: (define (sqrt x)
:    (define (good-enough ...))
:    (define (improve-guess ...))
:    (if (good-enough ...) ...)) ;;æ‡’å¾—æ•²äº†,è‡ªè¡Œè„‘è¡¥å§...

è¿™ç§åµŒå¥—çš„å®šä¹‰ç§°ä¸º =å—ç»“æ„=. å®ƒæ˜¯æœ€ç®€å•çš„åå­—åŒ…è£…é—®é¢˜çš„ä¸€ç§æ­£ç¡®è§£å†³æ–¹å¼. (è®²é“ç†è¿™è¯çœŸçš„æ˜¯ç»•...

å¦å¤–, é‡‡ç”¨è¿™ç§ç»“æ„é™¤äº†å¯ä»¥æŠŠè¾…åŠ©è¿‡ç¨‹éšè—ä¹‹å¤–, è¿˜å¯ä»¥åˆ©ç”¨ =è¯æ³•ä½œç”¨åŸŸ= æ¥ç®€åŒ–è¾…åŠ©è¿‡ç¨‹çš„å½¢å‚.
å¯¹è¿™ä¸ªä¾‹å­æ¥è¯´,å¯ä»¥çœç•¥æ‰è®¸å¤šx.

[å°å†å²] å—ç»“æ„çš„æ€æƒ³æ¥è‡ªç¨‹åºè®¾è®¡è¯­è¨€Algol 60.




** è¿‡ç¨‹ä¸å®ƒä»¬æ‰€äº§ç”Ÿçš„è®¡ç®—
èƒ½å¤Ÿçœ‹æ¸…æ‰€è€ƒè™‘çš„åŠ¨ä½œçš„åæœçš„èƒ½åŠ›, æ˜¯éå¸¸é‡è¦çš„. åªæœ‰åœ¨æ­¤ä¹‹å, äººä»¬æ‰èƒ½ =åå‘æ¨ç†=

*** çº¿æ€§çš„é€’å½’å’Œè¿­ä»£
ä¸¤ç§è®¡ç®—è¿‡ç¨‹:
=çº¿æ€§é€’å½’è¿‡ç¨‹= åœ¨è¿™ç§è®¡ç®—è¿‡ç¨‹é‡Œ,ä»£æ¢æ¨¡å‹å±•ç¤ºå‡ºä¸€ç§å…ˆå±•å¼€åæ”¶ç¼©çš„å½¢çŠ¶,æœ€å¤§é•¿åº¦æ­£æ¯”äºn.
è§£é‡Šå™¨ä¸ºé€’å½’è¿‡ç¨‹ç»´æŠ¤ä¸€éƒ¨åˆ†çŠ¶æ€ä¿¡æ¯.é€’å½’è¿‡ç¨‹æ‰€æ¶ˆè€—çš„å†…å­˜ä¸næˆæ­£æ¯”.
æ³¨æ„[é€’å½’è®¡ç®—è¿‡ç¨‹]ä¸[é€’å½’è¿‡ç¨‹]æ˜¯ä¸¤ä¸ªæ¦‚å¿µ.
=è¿­ä»£è®¡ç®—è¿‡ç¨‹= å¯ä»¥ç”¨å›ºå®šæ•°ç›®çš„çŠ¶æ€æè¿°çš„è®¡ç®—è¿‡ç¨‹. ä¸é€’å½’ä¸åŒçš„æ˜¯, è¿­ä»£è®¡ç®—è¿‡ç¨‹ä¸­ä¸ä¼šå‡ºç°å¢é•¿æˆ–æ”¶ç¼©.
è¿­ä»£è¿‡ç¨‹çš„æ‰€æœ‰çŠ¶æ€ä¿¡æ¯éƒ½ä¿å­˜åœ¨ç¨‹åºéå†æ˜‚ç«‹.è¿­ä»£è¿‡ç¨‹æ‰€æ¶ˆè€—çš„å†…å­˜æ˜¯å›ºå®šçš„.

æŸäº›è¯­è¨€(Pascal,C..)å¯¹é€’å½’è¿‡ç¨‹çš„è§£é‡Š,æ¶ˆè€—çš„å†…å­˜æ€»æ˜¯ä¸næˆæ­£æ¯”, å³ä½¿æ‰€æè¿°çš„è®¡ç®—è¿‡ç¨‹æ˜¯è¿­ä»£çš„.
è¦æè¿°è¿­ä»£è¿‡ç¨‹, å¿…é¡»å€ŸåŠ©äº"å¾ªç¯ç»“æ„".è€Œschemeåˆ™æ²¡æœ‰è¿™ä¸ªç¼ºé™·.
=å°¾é€’å½’= æ€»æ˜¯èƒ½åœ¨å¸¸é‡çš„ç©ºé—´ä¸­æ‰§è¡Œè¿­ä»£å‹è®¡ç®—è¿‡ç¨‹.

*** [ä¹ é¢˜]
**** 1.9 ç”¨ä»£æ¢æ¨¡å‹å±•ç¤ºä¸‹é¢ä¸¤ä¸ªè¿‡ç¨‹åœ¨æ±‚å€¼(+ 4 5)æ—¶æ‰€äº§ç”Ÿçš„è®¡ç®—è¿‡ç¨‹. å®ƒä»¬æ˜¯é€’å½’æˆ–è€…è¿­ä»£å—?
:    (define (+ a b) (if (= a 0) b (inc (+ (dec a) b))))
è®¡ç®—è¿‡ç¨‹(çº¯æ‰‹æ‰“):
:    (+ 4 5)
:    (inc (+ 3 5))
:    (inc (inc (+ 2 5)))
:    (inc (inc (inc (+ 1 5))))
:    (inc (inc (inc (inc (+ 0 5)))))
:    (inc (inc (inc (inc 5))))
:    (inc (inc (inc 6)))
:    (inc (inc 7))
:    (inc 8)
:    9
å®ƒæ˜¯é€’å½’è®¡ç®—è¿‡ç¨‹

:  (define (+ a b) (if (= a 0) b (+ (dec a) (inc b))))
è®¡ç®—è¿‡ç¨‹:
:    (+ 4 5)
:    (+ 3 7)
:    (+ 2 7)
:    (+ 1 8)
:    (+ 0 9)
:    9
å®ƒæ˜¯è¿­ä»£è®¡ç®—è¿‡ç¨‹

**** ä¸‹é¢æ˜¯ä¸€ä¸ªç§°ä¸ºackermannå‡½æ•°çš„æ•°å­¦å‡½æ•°
(define (A x y)
  (cond ((= y 0) 0)
        ((= x 0) (* 2 y))
	((= y 1) 2)
	(else (A (- x 1) (A x (- y 1))))))

ä¸‹é¢å„è¡¨è¾¾å¼çš„å€¼æ˜¯ä»€ä¹ˆ(äººè‚‰ç®—å•Š!)
- (A 1 10) 1024
- (A 2 4) 65536
(a 1 (a 2 3)).. (a 1 (a 1 (a 1 (a 2 1)))),(a 1 (a 1 (a 1 2))),
(a 1 (a 1 (a 0 (a 1 1)))),(a 1(a 1 (* 2 2))),(a 1(a 1 4)),(a 1 16),2^16
- (A 3 3) 65536
(a 2 (a 3 2)),(a 2(a 2(a 3 1))),(a 2 (a 2 2)),(a 2 4),65536


ä¸‹é¢è¿‡ç¨‹çš„æ•°å­¦å®šä¹‰æ˜¯?
- (define (f n) (A 0 n)) : f = 2*n
- (define (g n) (A 1 n)) : g = 2^n
- (define (h n) (A 2 n)) : h = 2^(2^(2...)
     
*** æ ‘å½¢é€’å½’
å¦ä¸€ç§å¸¸è§çš„ä¾‹å­ğŸŒ°,æ¯”å¦‚è²æ³¢é‚£åˆ‡æ•°åˆ—.

æœ´ç´ çš„æ ‘å½¢é€’å½’:
: (define (fib n)
:  (cond ((= n 0) 0)
: 	((= n 1) 1)
: 	(else (+ (fib (- n 1)) (fib ( - n 2))))))
ä¼˜åŒ–çš„è¿­ä»£ç‰ˆæœ¬:
: (define (fib-it a b count)
: (cond ((= count 0) b)
: 	(else (fib-it (+ a b) a (- count 1)))))
: (define (fib2 n) (fib-it 1 0 n))


*** [ä¹ é¢˜]
**** å‡½æ•°fç”±å¦‚ä¸‹è§„åˆ™å®šä¹‰: å¦‚æœn<3, é‚£ä¹ˆf(n)=n, å¦‚æœn>=3, é‚£ä¹ˆf(n)=f(n-1)+2f(n-1)+3f(n-3).åˆ†åˆ«å®ç°é€’å½’å’Œè¿­ä»£ç‰ˆæœ¬.
: ;;é€’å½’
: (define (f11 n)
:   (cond ((< n 3) n)
:   (else (+ (f11 (- n 1))
: 	   (* 2 (f11 (- n 2)))
: 	   (* 3 (f11 (- n 3)))))))
: ;; è¿­ä»£
: (define (f11-it a b c n)
:   (cond ((< n 3) a)
: 	(else (f11-it (+ a (* 2 b) (* 3 c)) a b (- n 1)))))
: (define (f112 n) (f11-it 2 1 0 n))

**** å†™ä¸€ä¸ªè¿‡ç¨‹,é‡‡ç”¨é€’å½’è®¡ç®—å‡ºå¸•æ–¯å¡ä¸‰è§’å½¢
: (define (psc n k)
:   (cond ((> k n) 0)
:       ((= n 0) 1)
: 	((= k 0) 1)
: 	(else (+ (psc (- n 1) (- k 1))  (psc (- n 1) k)))))

**** 1.13
æ’ç‰ˆæ¸£è¡¨ç¤ºè¿™é“é¢˜å¥½ä¸æƒ³æ•²å•Š...æŒ‰ç…§é¢˜ç›®æç¤ºç”¨æ•°å­¦å½’çº³æ³•è¯æ˜ç­‰å¼æ¯”è¾ƒå®¹æ˜“,è¯æ˜æ¥è¿‘æ•´æ•°ç¨å¾®éœ€è¦ä¸€ç‚¹æƒ³è±¡åŠ›...

ä¹ é¢˜è§£å¦‚ä¸‹, å„è·¯å­¦éœ¸å‡ºæ²¡:
http://sicp.readthedocs.org/en/latest/chp1/13.html

*** å¢é•¿çš„é˜¶
=å¢é•¿çš„é˜¶= ç”¨ä»¥æè¿°è®¡ç®—è¿‡ç¨‹æ¶ˆè€—è®¡ç®—èµ„æºçš„é€Ÿç‡.
- O(n): è§„æ¨¡å¢åŠ ä¸€å€, èµ„æºå¢åŠ ä¸€å€
- O(n^2): è§„æ¨¡å¢åŠ 1, èµ„æºå¢åŠ å¸¸æ•°å€. æ¯”å¦‚æ ‘å½¢é€’å½’å ç”¨ç©ºé—´æ˜¯(Ï•^n)
- O(lg n):è§„æ¨¡å¢åŠ ä¸€å€, èµ„æºå¢åŠ ä¸€ä¸ªå¸¸æ•°.
*** [ä¹ é¢˜]
**** 1.14 ç”»å‡º1.2.2èŠ‚è¿‡ç¨‹(count-change 11)çš„è®¡ç®—è¿‡ç¨‹. å½“ç°é‡‘é‡å¢åŠ æ—¶,è¿™ä¸€è¿‡ç¨‹ç©ºé—´å’Œæ­¥æ•°å¢é•¿çš„é˜¶å„æ˜¯ä»€ä¹ˆ?
è®¡ç®—è¿‡ç¨‹åœ¨çº¸ä¸Šç”»äº†ä¸€é...æ‡’å¾—æ¬ä¸Šæ¥äº†, ç›´æ¥å‚è€ƒä¹ é¢˜è§£é‡Œçš„å›¾å§
åé¢ä¸¤ä¸ªä¼°ç®—æ²¡æœ‰æ‰¾åˆ°æ ‡å‡†ç­”æ¡ˆ,å…ˆæŠŠè‡ªå·±çš„æ€è·¯å†™åœ¨è¿™é‡Œ.

è®¾ç°é‡‘é‡ä¸ºn,å¸ç§æ•°ä¸ºm,åˆ™
- æ­¥æ•°å¢é•¿çš„é˜¶:
è¿™ä¸ªè®¡ç®—è¿‡ç¨‹å—åˆ°å¸ç§é™åˆ¶, æ‰€ä»¥ä¸èƒ½ç®€å•çš„ç”¨äºŒå‰æ ‘å¤æ‚åº¦æ¥ä¼°ç®—.
æ ¹æ®è®¡ç®—è¿‡ç¨‹cc, å½“næ¯”è¾ƒå°æ—¶(æ¯”å¦‚å°äº50), å¤æ‚åº¦ä¸ºO(n).
å½“næ¯”è¾ƒå¤§çš„æ—¶å€™, å¤æ‚åº¦æ­£æ¯”äºnèƒ½å¤Ÿè¢«æœ€å¤§å¸ç§(è¿™é‡Œæ˜¯50)æ•´é™¤çš„æ¬¡æ•°.
o(f(n))=(1+2+3+...n/50)*n = ((1+n/50)*(n/50)/2)*n = o(n^2).

- ç©ºé—´å¢é•¿çš„é˜¶: O(n+m).æ ‘çš„æœ€å¤§æ·±åº¦ç”±nå†³å®š, æœ€æ·±å­æ ‘æ€»æ˜¯å…¨éƒ¨ç”±1å…ƒé’±å‡‘æˆnçš„æƒ…å†µ.

**** 1.15 é¢˜ç›®ç•¥.
[åæ§½:åŸæ¥å¯ä»¥è¿™æ ·å®ç°sin,é•¿å§¿åŠ¿äº†]

å¦‚æœè§£é‡Šå™¨çš„ä»£æ¢æ¨¡å‹æ˜¯æ˜¯ =åº”ç”¨åº= ,åˆ™è¿™ä¸ªé—®é¢˜æ˜¯çº¿æ€§è¿­ä»£:
- på°†è¢«ä½¿ç”¨å¤šå°‘æ¬¡?  5æ¬¡.
- ç©ºé—´å¢é•¿çš„é˜¶: n/(3^k) = 0.1, k=log_3 (10*n), æ‰€ä»¥æ˜¯O(lg n)
- æ­¥æ•°å¢é•¿çš„é˜¶: O(lg n)
å¦‚æœè§£é‡Šå™¨æ˜¯ =æ­£åˆ™åº= ,åˆ™è¿™ä¸ªé—®é¢˜æ˜¯æ ‘å½¢è¿­ä»£:
- på°†è¢«ä½¿ç”¨å¤šå°‘æ¬¡?  1 + 4 + 4^2 + 4^3 + 4^4
- å¢é•¿çš„é˜¶: O(4^n)

*** æ±‚å¹‚
å¿«é€Ÿæ±‚å¹‚æ³•fast-expt:
: b^n = (b^(n/2))^2 ;;è‹¥næ˜¯å¶æ•°
: b^n = b * b^(n-1) ;;è‹¥næ˜¯å¥‡æ•°

*** [ä¹ é¢˜]
**** 1.16 ç”¨fast-exptçš„æ€è·¯å®šä¹‰ä¸€ä¸ªè¿‡ç¨‹, å®ƒæŒ‰ç…§è¿­ä»£çš„æ–¹å¼äº§ç”Ÿå‡ºæ±‚å¹‚çš„è®¡ç®—è¿‡ç¨‹.
: (define (expt-iter b n a)
:   (cond ((= n 0) a)
: 	((even? n) (expt-iter  (* b b)  (/ n 2)  a))
: 	(else (expt-iter  b (- n 1) (* b a)))))

**** 1.17 ç”¨fast-exptçš„æ€è·¯å®ç°ä¸€ä¸ªåå¤ä½¿ç”¨åŠ æ³•è®¡ç®—ä¹˜ç§¯çš„è¿‡ç¨‹.
: (define (fast-mul a n)
:   (cond ((= n 0) 0)
: 	((= n 1) a)
: 	((even? n) (fast-mul (+ a a) (/ n 2)))
: 	(else (+ a (fast-mul a (- n 1))))))

**** 1.18 æ±‚ä¸¤ä¸ªæ•´æ•°çš„ä¹˜ç§¯
: (define (mul-iter b n a)
:   (cond ((= n 0) a)
: 	((even? n) (mul-iter (+ b b) (/ n 2) a))
: 	(else (mul-iter b (- n 1) (+ a b)))))


**** 1.19 ç”¨å¯¹æ•°æ­¥æ•°è®¡ç®—è²æ³¢é‚£åˆ‡æ•°åˆ—
è¿™é“é¢˜ç›®æ˜¯å‰é¢æ±‚å¹‚è¿‡ç¨‹çš„æ¨å¹¿. 

: (define (fib n)
:   (fib-iter 1 0 0 1 n))
: 
: (define (fib-iter a b p q count)
:   (cond ((= count 0) b)
: 	((even? count)
: 	 (fib-iter a
: 		   b
: 		   (+ (* p p) (* q q))
: 		   (+ (* 2 p q) (* q q))
: 		   (/ count 2)))
: 	 (else (fib-iter (+ (* b q) (* a q) (* a p))
: 			 (+ (* b p) (* a q))
: 			 p
: 			 q
: 			 (- count 1)))))

*** æœ€å¤§å…¬çº¦æ•°
GCD(a,b)=GCD(b,r), ræ˜¯aé™¤ä»¥bçš„ä½™æ•°.
: (define (gcd a b)
:   (cond ((= b 0) a)
: 	(else (gcd b (remainder a b)))))
*** [ä¹ é¢˜]
**** 1.20 è§£é‡Šå™¨æ˜¯åº”ç”¨åºå’Œæ­£åˆ™åºæ—¶,ä¸Šè¿°ç®—æ³•æ±‚(206 40)çš„è®¡ç®—è¿‡ç¨‹åˆ†åˆ«æ˜¯æ€æ ·çš„,remanderåˆ†åˆ«è°ƒç”¨å¤šå°‘æ¬¡
- åº”ç”¨åº
: (gcd 206 40)
: (gcd 40 6)
: (gcd 6 4)
: (gcd 4 2)
: (gcd 2 0)
: 2
ä¸€å…±4æ¬¡remander

- æ­£åˆ™åº
: (gcd 206 40)
: cond ...
: (gcd 40 (re 206 40)) ;;b=6
: cond ...  ;; +1
: (gcd (re 206 40) (re 40 (re 206 40))) ;;b=4
: cond ...  ;; +2
: (gcd (re 40 (re 206 40)) (re (re 206 40) (re 40 (re 206 40)))) ;;b=2
: cond ...  ;; +4
: (gcd .......) ;; b=0
: cond ...  ;; + 7
: a = (re (re 206 40) (re 40 (re 206 40) = (re 6 4) = 2 ;; +4
ä¸€å…±18æ¬¡remander

*** ç´ æ•°æ£€æµ‹
(ç»ˆäºå­¦ä¼šæ‰“å…¬å¼äº†â—‹|ï¿£|_)

æœ¬èŠ‚æè¿°ä¸¤ç§æ£€æŸ¥æ•´æ•°næ˜¯å¦ä¸ºç´ æ•°çš„æ–¹æ³•,ç¬¬ä¸€ä¸ªå…·æœ‰O($\sqrt{n}$)çš„å¢é•¿é˜¶,
ç¬¬äºŒä¸ªå…·æœ‰O(log n)çš„å¢é•¿é˜¶.

- å¯»æ‰¾å› å­:ç”¨ä»2å¼€å§‹çš„è¿ç»­æ•´æ•°å¼€å§‹ä¾æ¬¡æ£€æŸ¥å®ƒä»¬æ˜¯å¦èƒ½æ•´é™¤n.å¦‚æœnä¸æ˜¯ç´ æ•°,å¿…ç„¶æœ‰å°äºæˆ–ç­‰äº $\sqrt{n}$ çš„å› å­,ç”±æ­¤å¯çŸ¥è¿™ä¸ªç®—æ³•æ‹¥æœ‰O($\sqrt{n}$)çš„å¢é•¿é˜¶.
- è´¹é©¬æ£€æŸ¥:O(log n)çš„æ£€æŸ¥åŸºäºæ•°è®ºä¸­è‘—åçš„è´¹é©¬å°å®šç†(æ•°è®ºå…¨å¿˜å…‰äº†...æ¡‘ä¸èµ·)

=è´¹é©¬å°å®šç†=: å¦‚æœnæ˜¯ä¸€ä¸ªç´ æ•°,aæ˜¯å°äºnçš„ä»»æ„æ­£æ•´æ•°,é‚£ä¹ˆaçš„næ¬¡æ–¹ä¸aæ¨¡nåŒä½™.
è€Œå¦‚æœ= ä¸æ˜¯ç´ æ•° =,åˆ™å¤§éƒ¨åˆ†a<néƒ½å°†æ»¡è¶³ä¸Šé¢çš„å…³ç³»,è¿™å°±å¼•å‡ºäº†æ£€æŸ¥ç´ æ•°çš„ç®—æ³•: å¦‚æœå‘ç°ä¸æ»¡è¶³å…³ç³»çš„aé‚£ä¹ˆnè‚¯å®šä¸æ˜¯ç´ æ•°.

=è´¹é©¬æ£€æŸ¥=: é‡‡ç”¨è®¸å¤šéšæœºçš„aæ¥æ£€æŸ¥,é€šè¿‡çš„æ£€æŸ¥è¶Šå¤šåˆ™næ˜¯ç´ æ•°çš„æ¦‚ç‡è¶Šå¤§.

é¦–å…ˆå®šä¹‰ä¸€ä¸ªO(log n)çš„è¿­ä»£è¿‡ç¨‹è®¡ç®— $a^n$ å¯¹må–æ¨¡çš„ç»“æœ(a<n,a<m)
: (define (expmod bas exp m)
:   (cond ((= exp 0 ) 1)
: 	((even? exp)
: 	 (remainder (square (expmod bas (/ exp 2) m)) m))
: 	(else
: 	 ;;  $(a*a^{n/2}*a^{n/2})%n = (a%n)*(a^{n/2}%n)^2 = a*(a^{n/2}%n)^2
: 	 (remainder (* bas (expmod bas (- exp 1) m)) m))))

å…¶ä¸­å…³äºè¿ç»­æ±‚å¹³æ–¹çš„æ¨å¯¼å¦‚ä¸‹:

$\gcd((a^{n/2}a^{n/2}),n)=\gcd(a^{n/2},n)\gcd(a^{n/2},n)=\gcd(a^{n/2},n)^2$

$\gcd((a*a^{n/2}a^{n/2}),n)=\gcd(a,n)\gcd(a^{n/2},n)^2=a*\gcd(a^{n/2},n)$

ç„¶åéšæœº1å’Œn-1ä¹‹é—´çš„æ•´æ•°è¿›è¡Œæµ‹è¯•:
: (define (fermat-test n)
:   (define (try-it a)
:     (= (expmod a n n) a))
:   (try-it (+ 1 (random (- n 1)))))
: 
: (define (fast-prime? n times)
:   (cond ((= times 0) true)
: 	((fermat-test n) (fast-prime? n (- times 1)))
: 	(else false)))

*** æ¦‚ç‡æ–¹æ³•
è´¹é©¬æ£€æŸ¥çš„ç»“æœåªæœ‰æ¦‚ç‡ä¸Šçš„æ­£ç¡®æ€§..ä½†èƒ½å¤Ÿè¯æ˜å­˜åœ¨ä½¿å‡ºé”™æ¦‚ç‡ä»»æ„å°çš„ç®—æ³•.

*** [ä¹ é¢˜]

**** ä½¿ç”¨smallest-divisorè¿‡ç¨‹æ‰¾å‡ºä¸‹é¢å„æ•°çš„æœ€å°å› å­:199,1999,19999
é¦–å…ˆè®¾è®¡äº†ä¸€ä¸ª(æœ‰ç‚¹æŒ«)çš„ç®—æ³•,ä»2åˆ°néå†,å¯»æ‰¾ç¬¬ä¸€ä¸ªèƒ½å¤Ÿæ•´é™¤nçš„ç´ æ•°.(èƒ½å¤Ÿæƒ³åˆ°çš„ä¼˜åŒ–ç‰ˆç®—æ³•åªæœ‰ç´ æ•°è¡¨äº†orz.
: (define (divisor-test a n)
:   (cond ((= n 1) 1)
: 	((= n 0) 0)
: 	((and (fast-prime? a 10) (= (remainder n a) 0)) a)
: 	(else (divisor-test (+ a 1) n))))
: 
: (define (smallest-divisor n) (divisor-test 2 n))è®¡ç®—ç»“æœæ˜¯199:199,1999:1999,19999:7.

**** è§‚å¯ŸæŸ¥æ‰¾ç´ æ•°çš„æ—¶é—´.é¢˜ç›®ç•¥...
: (define (search-for-prime n)
:   (cond ((prime? n) 
: 	(display n))
: 	(else (cond ((even? n)
: 		     (search-for-prime (+ n 1)))
: 		    (else 
: 		     (search-for-prime (+ n 2)))))))
: 
: (define (start-search-prime n start-time)
:   (search-for-prime n)
:   (newline)
:   (display (- (real-time-clock) start-time)))
: 
: (define (time-for-search-prime n)
:   (start-search-prime n (real-time-clock)))
ä¸€å¼€å§‹ä½¿ç”¨é¢˜ç›®ç»™çš„(runtime)è®¡ç®—æ—¶é’Ÿå‘¨æœŸ,ç»“æœæ— è®ºåé¢åŠ å¤šå°‘ä¸ªé›¶,ç»“æœå‡ ä¹éƒ½åœ¨1e-2å·¦å³.
åæ¥å¾—çŸ¥ç°åœ¨çš„MIT-schemeçš„runtimeæŒ‰ç§’è®¡æ—¶,æ¢æˆä»¥tickè®¡æ—¶çš„real-time-clockå°±å¯¹äº†.

æµ‹è¯•ç»“æœæ˜¯:
- 1000:1 (ç»“æœæ˜¯1009,6æ¬¡æµ‹è¯•,å¹³å‡0.17msæ¯æ¬¡)
- 10000:1 (5,0.25)
- 100000:1 (3,0.33)
- 1000000:2 (3,0.67)
- 10000000:8 (10,0.8)
- 100000000:15 (5,3)
- 1000000000:37 (5,7.4)
- 10000000000:169 (10,16.9)
1000000ä»¥ä¸‹çš„æµ‹è¯•ç»“æœå·®åˆ«å¾ˆå°, 1000000ä»¥ä¸Šå·®å¼‚æ˜¯2.xå€, å¯è§æµ‹è¯•ç»“æœä¸é¢„æœŸçš„$/sqrt{n}$ä¸ç¬¦.

**** ä¿®æ”¹æœ¬èŠ‚å¼€å§‹çš„smallest-divisorè¿‡ç¨‹,ä½¿å…¶æ­¥æ•°å‡åŠ,å¹¶æ£€éªŒç»“æœæ˜¯å¦ç¬¦åˆé¢„æœŸ
: (define (smallest-divisor-fast n)
:   (let  ((t (real-time-clock)))
:     (display (find-divisor-fast n 2))
:     (- (real-time-clock) t)))
: 
: (define (find-divisor-fast n test)
:   (cond ((> (square test) n) n)
: 	((divides? n test) test)
: 	(else (find-divisor-fast n (next test)))))
: 
: (define (next n)
:   (cond ((even? n) (+ n 1))
: 	(else (+ n 2))))

ä¸ºäº†ä½¿å·®åˆ«æ¯”è¾ƒæ˜¾è‘—,æŒ‘é€‰2ä¸ªç›¸å·®10å€å·¦å³çš„ç´ æ•°è¿›è¡Œæµ‹è¯•:1009,10009
- (smallest-divisor-fast (* 1009 10009))  ==> 1
- (smallest-divisor (* 1009 10009))       ==> 2
- (smallest-divisor-fast (* 10009 10009)) ==> 9
- (smallest-divisor (* 10009 10009))      ==> 14
- (smallest-divisor-fast (* 20029 20029)) ==> 16
- (smallest-divisor-sqre (* 20029 20029)) ==> 26
å¯è§fastç‰ˆæœ¬é€Ÿåº¦æ¯”åŸæœ‰ç‰ˆæœ¬å¿«,ä½†ä¸¤ä¸ªç®—æ³•é€Ÿåº¦æ¯”å€¼æ¯”2å°.

åˆæ­¥æ¨æµ‹,å½“ç®—æ³•å¤æ‚åº¦ä½ä¸”å‚æ•°æ¯”è¾ƒå°æ—¶,è¿™ä¸ªç®—æ³•æœ¬èº«çš„è€—æ—¶åœ¨ä¸€ä¸ªè¿‡ç¨‹çš„æ‰§è¡Œè¿‡ç¨‹ä¸­å æ¯”éå¸¸ä½.
è€Œæ‰§è¡Œè¿‡ç¨‹æ‰€éœ€çš„å¤§é‡é€’å½’è°ƒç”¨,å˜é‡ç»‘å®šç­‰æ“ä½œæ¶ˆè€—æ‰ç»å¤§éƒ¨åˆ†CPUèµ„æº,å¯¼è‡´æˆ‘ä»¬å¾—åˆ°çš„ç»“æœä¸å‡†ç¡®.
è€Œå½“å‚æ•°å¢å¤§æ—¶,ç®—æ³•æœ¬èº«å ç”¨çš„èµ„æºæ¯”ä¾‹å˜å¤§,ä½¿å¾—ç»“æœä¸æˆ‘ä»¬çš„é¢„æµ‹è¶Šæ¥è¶Šæ¥è¿‘.

æ‰€ä»¥ä¼°ç®—ç®—æ³•å¤æ‚åº¦å¹¶ä¸èƒ½å®Œå…¨é¢„æµ‹è¿‡ç¨‹çš„å®é™…æ‰§è¡Œæ—¶é—´.

**** ä½¿ç”¨fast-prime?ä»£æ›¿prime?å®ç°ç¬¬äºŒé¢˜.å¹¶æ£€éªŒç»“æœæ˜¯å¦ç¬¦åˆé¢„æœŸ.
æŠŠä¸Šä¸Šé“é¢˜ç›®ä»£ç ä¸­çš„prime?æ¢æˆfast-primeå°±å¯ä»¥äº†.
: (define (search-for-prime n)
:   (cond ((fast-prime? n 50) 
: 	(display n))
: 	(else 
: 	 (cond ((even? n)
: 		(search-for-prime (+ n 1)))
: 	       (else 
: 		(search-for-prime (+ n 2)))))))
æµ‹è¯•ç»“æœ:
- 1000:2 
- 10000:2
- 100000:3
- 10000000:4
- 1000000000000:8
å·®è·æ¯”é¢„æœŸå°çš„å¤š,ä½†å‚æ•°è¶Šå¤§å·®åˆ«è¶Šæ˜æ˜¾.è§£é‡Šè§ä¸Šä¸€é¢˜.

[Mark] å­¦ä¹ å®Œåé¢çš„å†…å®¹å¯èƒ½ä¼šåœ¨è§£é‡Šå™¨å±‚é¢ä¸Šå¯¹è¿™ä¸ªé—®é¢˜æœ‰æ–°çš„è§è§£,åˆ°æ—¶å€™å†è¡¥å……å§.

**** åˆ†æAlyssaçš„æ–¹æ³•æ˜¯å¦å®ç”¨
Alyssaçš„æ–¹æ³•ç†è®ºä¸Šæ¯”æœ¬èŠ‚çš„ç®—æ³•æ­¥æ•°åªæœ‰1æ­¥,ä½†å®¹æ˜“æº¢å‡º.
æœ¬èŠ‚çš„æ–¹æ³•è™½ç„¶æ­¥æ•°å¤šäº†ä¸€äº›, ä½†å®ƒä¸ä¼šçœŸæ­£è¿›è¡Œå·¨å¤§çš„ä¹˜å¹‚è¿ç®—, æ‰€ä»¥æœ¬èŠ‚çš„æ–¹æ³•æ›´åŠ å®ç”¨.

**** åˆ†æfast-prime?ä¸­çš„expmodä½¿ç”¨æ˜¾ç¤ºä¹˜æ³•ä¸ºä½•ä¼šæŠŠO(log n)çš„ç®—æ³•å˜æˆO(n)çš„.
ä¸‹é¢æŠŠ(expmod base (/ exp 2) m)ç®€å†™ä¸º =ep(n)=

ä½¿ç”¨ä¹˜æ³•:
: ep(n)
: (* ep(n/2) ep(n/2))
: (* (* ep(n/4) ep(n/4)) (* ep(n/4) ep(n/4)))
: (* (* (* ep(n/8) ep(n/8)) (* ep(n/8) ep(n/8))) (* (* ep(n/8) ep(n/8)) (* ep(n/8) ep(n/8))))
: ...
å±•å¼€åå¯å¾—è¿›è¡Œexpmodè¿ç®—çš„æ¬¡æ•°æ˜¯ $2^{log_2{n}}=n$ æ¬¡

ä½¿ç”¨square:
: ep(n)
: (square ep(n/2))
: (square (square ep(n/4)))
: ...
$log_2{n}$ æ¬¡

**** è¯æ˜æ³¨è„š47ä¸­åˆ—å‡ºçš„Carmichaelæ•°ç¡®å®èƒ½éª—è¿‡è´¹é©¬æ£€æŸ¥.
é¦–å…ˆå†™ä¸€ä¸ªè¿‡ç¨‹,æ£€éªŒ *æ‰€æœ‰* å°äºnçš„a,çœ‹ $a^{n}$ æ˜¯å¦ä¸aæ¨¡nåŒä½™.
: (check-prime? 561) => #t
: (check-prime? 1105) => #t
: (check-prime? 1729) => #t
: (check-prime? 2465) => #t
: (check-prime? 2821) => #t
: (check-prime? 6601) => #t

**** Miller-Rabinæ£€æŸ¥
æŠŠå‰é¢fast-primeè¿‡ç¨‹ä¸­çš„fermat-testæ›¿æ¢ä¸ºmiller-test
: (define (miller-test n)
:   (define (try-it a)
:     (= (expmod a (- n 1) n) 1))
:   (try-it (+ 1 (random (- n 1)))))
: 
: (define (fast-prime? n times)
:   (cond ((= n 1) true)
: 	((= times 0) true)
: 	((miller-test n) (fast-prime? n (- times 1)))
: 	(else false)))
ä½¿ç”¨å‰é¢çš„carmichaelæ•°æµ‹è¯•,ç»“æœéƒ½ä¸º#f

** ç”¨é«˜é˜¶å‡½æ•°åšæŠ½è±¡
åœ¨ä½œç”¨ä¸Š,è¿‡ç¨‹ä¹Ÿæ˜¯ä¸€ç±»æŠ½è±¡,å®ƒä»¬æè¿°äº†ä¸€äº›å¯¹äºæ•°çš„å¤åˆæ“ä½œ,ä½†ä¸ä¾èµ–ç‰¹å®šçš„æ•°,ç”šè‡³ä¸åªç”¨æ•°ä½œä¸ºå‚æ•°.

=é«˜é˜¶è¿‡ç¨‹= æ˜¯èƒ½æ“ä½œè¿‡ç¨‹çš„è¿‡ç¨‹, å®ƒèƒ½ä»¥è¿‡ç¨‹ä½œä¸ºå‚æ•°,æˆ–è€…ä»¥è¿‡ç¨‹ä½œä¸ºè¿”å›å€¼.

è¿™ä¹Ÿæ˜¯lispçš„ä¸€ä¸ªå‰å®³ä¹‹å¤„.

*** è¿‡ç¨‹ä½œä¸ºå‚æ•°
æ•™æğŸŒ°:
: (define (sum term a next b)
:   (if (> a b)
:       0
:       (+ (term a) (sum term (next a) next b))))
:
: (define (cub n) (* n n n))
: (define (add n) (+ n 1))
: (define (sum-cube a b) (sum cub a add b))
ä½¿ç”¨å…¶å®ƒé«˜çº§è¯­è¨€å®ç°è¿™ç§è¿‡ç¨‹ä½œä¸ºå‚æ•°çš„è¿‡ç¨‹æ—¶,ç»å¯¹ä¸ä¼šè¿™ä¹ˆç®€æ´.

*** [ç»ƒä¹ ]

**** ä¸Šé¢çš„sumè¿‡ç¨‹äº§ç”Ÿä¸€ä¸ªçº¿æ€§é€’å½’, ä½¿ç”¨è¿­ä»£æ–¹å¼é‡å†™è¯¥è¿‡ç¨‹.
: (define (sum term a next b)
:   (define (iter n result)
:     (if (> n b) 
: 	result
: 	(iter (next n) (+ result (term n)))))
:   (iter a 0))

**** å†™ä¸€ä¸ªproductè¿‡ç¨‹,è¿”å›åœ¨ç»™å®šèŒƒå›´ä¸­å„ç‚¹çš„æŸä¸ªå‡½æ•°å€¼å¾—ä¹˜ç§¯.è¯·è¯´æ˜å¦‚ä½•ç”¨productå®šä¹‰faactorial.
: ;; é€’å½’
: (define (product a b term)
:  (if (> a b)
:        1
:        (* (term a) (product (+ a 1) b term))))
: 
: ;; è¿­ä»£
: (define (product-iter a b next)
:   (define (iter n result)
:     (if (> n b) 
: 	result
: 	(iter (+ n 1) (* result (term n)))))
:   (iter a 0))
: 
: ;; åˆ†å­
: (define (term-numer a)
:   (cond ((odd? a) (+ a 1))
: 	(else (+ a 2))))
: ;; åˆ†æ¯
: (define (term-deno a)
:   (cond ((even? a) (+ a 1))
: 	(else (+ a 2))))
: 
: ;; pi/4
: (define (quarter-pi n)
:   (/ (product 1 n term-numer) (product 1 n term-deno)))


*** ç”¨lambdaæ„é€ è¿‡ç¨‹
ä¸ºäº†çœå»å•ç‹¬å®šä¹‰ä¸€äº›ç®€å•å‡½æ•°çš„éº»çƒ¦,å¼•å…¥lambdaç‰¹æ®Šå½¢å¼æ¥å®Œæˆè¿™ç±»æè¿°,è€Œä¸å¿…ç»™æ¯ä¸ªè¿‡ç¨‹ç»‘å®šåå­—.
: (lambda (x) (+ x 4))
å®é™…ä¸Š, (define (<name> <param ...>) ()) æ˜¯lambdaçš„ä¸€ç§è¯­æ³•ç³–.
: (define (plus4 n) (+ n 4))
ç­‰ä»·äº:
: (define plus4 (lambda (n) (+ n 4)))
lambdaè¡¨è¾¾å¼å¯ä»¥ç”¨åš *ç»„åˆå¼çš„è¿ç®—ç¬¦*:
: ((lambda (x) (+ x 4)) 1)

*** ç”¨letåˆ›å»ºå±€éƒ¨å˜é‡
lambdaçš„å¦ä¸€ä¸ªä½œç”¨æ˜¯åˆ›å»ºå±€éƒ¨å˜é‡,ä¸ºæ­¤è¯­è¨€é‡Œæœ‰ä¸€ä¸ªè¯­æ³•ç³– =let=
: (define (f x y)
:  ((lambda (a b)
:   (+ (* x (square a))
:     (* y b)
:     (* a b)))
:   (+ 1 (x y))
:   (- 1 y)))
ç”¨letå½¢å¼å¯ä»¥ç®€åŒ–ä¸º
: (define (f x y)
:  (let ((a (+ 1 (x y)))
:        (b (- 1 y)))
:    (+ (* x (square a))
:       (* y b)
:       (* a b))))
æ³¨æ„ä½¿ç”¨letçº¦æŸçš„å±€éƒ¨å˜é‡å¿…é¡»åœ¨letçš„bodyä¸­.
- letä½¿äººèƒ½åœ¨å°½å¯èƒ½æ¥è¿‘å…¶ä½¿ç”¨çš„åœ°æ–¹å»ºç«‹å±€éƒ¨å˜é‡çº¦æŸ.
- å˜é‡çš„å€¼æ˜¯åœ¨letä¹‹å¤–è®¡ç®—çš„. å¦‚ä¸‹é¢è¿‡ç¨‹
: ....
: (let (x 3)
:      (y x))
å¦‚æœxåœ¨letä¹‹å‰çš„å€¼æ˜¯2,åœ¨letå†…x=3, è€Œy=2.

æœ‰æ—¶åœ¨è¿‡ç¨‹å†…éƒ¨defineä¹Ÿæœ‰ä¸letä¸€æ ·çš„æ•ˆæœ:
: (define (f x y)
:   (define a (...))
:   (define b (...))
:   (+ a b))





     

